<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Sensum Emotion AI API & SDK Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;javascript&quot;,&quot;javascript--nodejs&quot;,&quot;python&quot;,&quot;java&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.svg" alt="Navbar" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <a class="logo" href="https://sensum.co">
      <img src="images/logo.svg" alt="Logo" />
      </a>
        <div class="lang-selector">
              <a href="#" data-language-name="javascript">JavaScript</a>
              <a href="#" data-language-name="javascript--nodejs">Node.JS</a>
              <a href="#" data-language-name="python">Python</a>
              <a href="#" data-language-name="java">Java (Android)</a>
        </div>
  <div id="toc">
  </div>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="introduction">Introduction</h1>

<p>Welcome to the Sensum Emotion AI API &amp; SDK.</p>

<p>The <strong>SensumAPI</strong> and <strong>SensumSDK</strong> enables you to build services or products which respond to emotional events in real time.</p>

<h1 id="glossary-of-terms">Glossary of Terms</h1>

<table><thead>
<tr>
<th>Term</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>SensumAPI</strong></td>
<td>The <strong>SensumAPI</strong> is the RESTful API that is used either directly or through the <strong>SensumSDK</strong></td>
</tr>
<tr>
<td><strong>SensumSDK</strong></td>
<td><strong>SensumSDK</strong> refers to the Android SDK</td>
</tr>
</tbody></table>

          <h1 id="sensumapi">SensumAPI</h1>

<h2 id="introduction">Introduction</h2>

<blockquote>
<p>Scroll down for code samples, example requests and responses. Select a language for code samples from the tabs above or the mobile navigation menu.</p>
</blockquote>

<p><strong>SensumAPI</strong> enables you to access our emotional intelligence platform.  Our API is designed to be RESTful, responding to HTTP requests with bodies in JSON format. All requests require that the <code class="prettyprint">Content-Type: application/json</code> header be specified.
<strong>SensumAPI</strong> is also cross-origin resource sharing ready.</p>

<p><strong>SensumSDK</strong> handles many of these requests and responses natively. It can however be useful to utilise the <strong>SensumAPI</strong> directly.</p>

<h2 id="uri-structure">URI Structure</h2>

<p><strong>SensumAPI</strong> uses URI resources to provide access to its services. To use a RESTful API, your application will use HTTP Methods(GET, POST, etc.) to request and parse a response. <strong>SensumAPI</strong> uses JSON for communication between your application and the server.</p>

<p>An example URI:
<a href="">https://api.sensum.co/v0/testdata</a></p>

<h2 id="authorization">Authorization</h2>

<p><strong>SensumAPI</strong> uses a combination of an API Key and request signing to authorize access. You can register a new API Key by contacting us.</p>

<p><strong>SensumAPI</strong> expects each call to contain the following headers to gain access:</p>

<ul>
<li>Content-Type: <code class="prettyprint">application/json</code></li>
<li>Authorization: <code class="prettyprint">$AWSv4Signature</code></li>
<li>X-API-Key: <code class="prettyprint">$YourAPIKey</code>(For trial usage use &ldquo;PublicDemoKeyForDocumentation&rdquo;)</li>
</ul>

<p>To calculate the value for the Authorization header you must calculate a hash of your request, add extra information, then add the AWS secret key in order to create a signing key and then use this to sign the request.
To learn more about generating the Signature please read the <a href="https://docs.aws.amazon.com/general/latest/gr/signature-v4-examples.html">AWS Documentation on Signature v4</a></p>

<p>When using the SDK, the signature will be automatically generated when making API calls through it.</p>

<aside class="notice">Replace the above authorization header with the AWS Signature generated after login and X-API-Key with your personal API key.</aside>

<h2 id="available-metrics">Available Metrics</h2>

<p>Below are the metrics that <strong>SensumAPI</strong> can analyse and the units that the data is posted in</p>

<table><thead>
<tr>
<th>Metric Name</th>
<th>Unit</th>
</tr>
</thead><tbody>
<tr>
<td><a href = "http://help.sensum.co/knowledge_base/topics/why-measure-heart-rate"><code class="prettyprint">heartrate</code></a></td>
<td>bpm</td>
</tr>
<tr>
<td><code class="prettyprint">breathingrate</code></td>
<td>bpm</td>
</tr>
<tr>
<td><code class="prettyprint">temperature</code></td>
<td><sup>o</sup>C, assumed to be ambient/external</td>
</tr>
<tr>
<td><code class="prettyprint">skintemperature</code></td>
<td><sup>o</sup>C</td>
</tr>
<tr>
<td><a href = "http://help.sensum.co/knowledge_base/topics/what-is-gsr"><code class="prettyprint">gsr</code></a></td>
<td>microsiemens<sup>*</sup></td>
</tr>
<tr>
<td><code class="prettyprint">location_latitude</code></td>
<td>deg</td>
</tr>
<tr>
<td><code class="prettyprint">location_longitude</code></td>
<td>deg</td>
</tr>
<tr>
<td><code class="prettyprint">location_altitude</code></td>
<td>m</td>
</tr>
<tr>
<td><code class="prettyprint">location_accuracy</code></td>
<td>or location_accuracy_horizontal/vertical if available</td>
</tr>
<tr>
<td><code class="prettyprint">location_speed</code></td>
<td>m/s</td>
</tr>
<tr>
<td><code class="prettyprint">acceleration</code></td>
<td>linear acceleration in m/s<sup>2**</sup></td>
</tr>
<tr>
<td><code class="prettyprint">acceleration_x</code></td>
<td>m/s<sup>2</sup></td>
</tr>
<tr>
<td><code class="prettyprint">acceleration_y</code></td>
<td>m/s<sup>2</sup></td>
</tr>
<tr>
<td><code class="prettyprint">acceleration_z</code></td>
<td>m/s<sup>2</sup></td>
</tr>
</tbody></table>

<p><sup>*</sup> The GSR Conductance unit &lsquo;microsiemens&rsquo; is the inverse of the skin resistance; some devices return GSR as resistance in Ohms and this must be converted before upload, i.e. if a device returns values in x kOhms, the conversion is 1/(1000*x)</p>

<p><sup>**</sup> All acceleration values should exclude gravity and be in m/s<sup>2</sup></p>

<h2 id="sensumapi-analysis-responses">SensumAPI Analysis Responses</h2>

<table><thead>
<tr>
<th>Input Metric(s)</th>
<th>Generated Events</th>
<th>Generated Records</th>
<th>Generated Stats</th>
</tr>
</thead><tbody>
<tr>
<td><em>any</em></td>
<td><a href = "#events">Events for that Metric</a></td>
<td></td>
<td><a href="#stats">Stats for that event</a></td>
</tr>
<tr>
<td><code class="prettyprint">heartrate</code></td>
<td></td>
<td><code class="prettyprint">arousal</code></td>
<td><code class="prettyprint">arousal</code> <a href="#fuzzy-class-stats">(See Fuzzy Class Stats)</a></td>
</tr>
<tr>
<td><code class="prettyprint">gsr</code></td>
<td></td>
<td><code class="prettyprint">engagement</code></td>
<td><code class="prettyprint">engagement</code> <a href="#fuzzy-class-stats">(See Fuzzy Class Stats)</a></td>
</tr>
<tr>
<td><code class="prettyprint">acceleration_[x,y,z]</code></td>
<td></td>
<td><code class="prettyprint">activity</code></td>
<td><code class="prettyprint">activity</code> <a href="#fuzzy-class-stats">(See Fuzzy Class Stats)</a></td>
</tr>
</tbody></table>

<h3 id="events">Events</h3>

<table><thead>
<tr>
<th>Event Fields</th>
<th>Type</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">time</code></td>
<td>UTC Timestamp (ms)</td>
<td>Time of event</td>
</tr>
<tr>
<td><code class="prettyprint">value</code></td>
<td>String: One of [&lsquo;normal&rsquo;, &lsquo;rising&rsquo;, &lsquo;falling&rsquo;, &lsquo;max&rsquo;, &lsquo;min&rsquo;]</td>
<td>Type of event (normal is not currently used)</td>
</tr>
<tr>
<td><code class="prettyprint">severity</code> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</td>
<td>Float</td>
<td>Relative severity of the event, i.e. how much of value change between forward/backward events with respect to the average value</td>
</tr>
</tbody></table>

<h3 id="stats">Stats</h3>

<table><thead>
<tr>
<th>Stats Field</th>
<th>Type</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">avg</code></td>
<td>Float</td>
<td>average (mean) value</td>
</tr>
<tr>
<td><code class="prettyprint">duration</code></td>
<td>Float (seconds)</td>
<td>time between first and last analysed records</td>
</tr>
<tr>
<td><code class="prettyprint">max</code></td>
<td>Float</td>
<td>max value</td>
</tr>
<tr>
<td><code class="prettyprint">min</code></td>
<td>Float</td>
<td>min value</td>
</tr>
<tr>
<td><code class="prettyprint">std</code></td>
<td>Float</td>
<td>standard deviation of the record</td>
</tr>
<tr>
<td><code class="prettyprint">percentiles</code></td>
<td>Object(dict)</td>
<td>10th, 50th, and 90th <a href = "https://en.wikipedia.org/wiki/Percentile"> percentile values </a></td>
</tr>
</tbody></table>

<h3 id="fuzzy-class-stats">Fuzzy Class Stats</h3>

<p>For <a href = "https://en.wikipedia.org/wiki/Fuzzy_classification">&ldquo;fuzzy&rdquo;</a> classification outputs such as <code class="prettyprint">arousal</code>, <code class="prettyprint">engagement</code> and <code class="prettyprint">activity</code>, an additional stats structure is used containing 3 fields:</p>

<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">value</code></td>
<td>Float</td>
<td>[0-1] activation value</td>
</tr>
<tr>
<td><code class="prettyprint">dominant</code></td>
<td>string</td>
<td>label of the dominant classification category</td>
</tr>
<tr>
<td><code class="prettyprint">sectors</code></td>
<td>Object(dict)</td>
<td>per-category-label activivation i.e <code class="prettyprint">{label:value,...}</code></td>
</tr>
</tbody></table>

<p>Current Sector Labels (highest to lowest activation value):</p>

<ul>
<li>Activity : <code class="prettyprint">active</code>, <code class="prettyprint">inactive</code></li>
<li>Arousal : <code class="prettyprint">excited</code>, <code class="prettyprint">activated</code>, <code class="prettyprint">calm</code>, <code class="prettyprint">passive</code>, <code class="prettyprint">relaxed</code></li>
<li>Engagement: <code class="prettyprint">highly engaged</code>, <code class="prettyprint">engaged</code>, <code class="prettyprint">activated</code>, <code class="prettyprint">neutral</code></li>
</ul>

<h2 id="send-text-data-to-analyse-emoji-and-text-sentiment">Send text data to analyse emoji and text sentiment</h2>

<p>This endpoint allows users to send strings of text to our service for emotional sentiment analysis.</p>

<p>The service will return a JSON object that contain Positivity, Negativity and Emotionality values for emojis and text.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST https://api.sensum.co/v0/sentiment</code></p>

<aside class="warning">
To perform this operation, you must be authenticated by means of the following headers:
API Key, Authorization.
</aside>

<h3 id="glossary">Glossary</h3>

<table><thead>
<tr>
<th>Term</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">positivity</code></td>
<td>The level of positive emotion expressed in an input(Scale: 0 to +1)</td>
</tr>
<tr>
<td><code class="prettyprint">negativity</code></td>
<td>The level of negative emotion expressed in an input(Scale: 0 to +1)</td>
</tr>
<tr>
<td><code class="prettyprint">emotionality</code></td>
<td>The overall strength of emotion contained in an input(Scale: -1 to +1)*</td>
</tr>
</tbody></table>

<ul>
<li>Values greater than 0 imply positive feelings, values less than 0 imply negative feelings while 0 implies no emotional response.</li>
</ul>

<blockquote>
<p>Code samples</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">'Content-Type'</span><span class="p">:</span><span class="s1">'application/json'</span><span class="p">,</span>
  <span class="s1">'Authorization'</span> <span class="p">:</span> <span class="s1">'AWS Sig v4 Key'</span><span class="p">,</span>
  <span class="s1">'x-api-key'</span> <span class="p">:</span> <span class="s1">'PublicDemoKeyForDocumentation'</span>

<span class="p">};</span>

<span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">"text"</span><span class="p">:</span><span class="s2">"ðŸ‘ŒðŸ‘ŒðŸ‘Œ"</span>
<span class="p">};</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://api.sensum.co/v0/sentiment'</span><span class="p">,</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'post'</span><span class="p">,</span>
  <span class="na">data</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
  <span class="nl">headers</span><span class="p">:</span> <span class="nx">headers</span><span class="p">,</span>
  <span class="na">success</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">data</span><span class="p">));</span>
  <span class="p">}</span>
<span class="p">})</span>
</code></pre><pre class="highlight javascript tab-javascript--nodejs"><code><span class="kr">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'node-fetch'</span><span class="p">);</span>

<span class="kr">const</span> <span class="nx">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">'Content-Type'</span><span class="p">:</span><span class="s1">'application/json'</span><span class="p">,</span>
  <span class="s1">'Authorization'</span> <span class="p">:</span> <span class="s1">'AWS Sig v4 Key'</span><span class="p">,</span>
  <span class="s1">'x-api-key'</span> <span class="p">:</span> <span class="s1">'PublicDemoKeyForDocumentation'</span>

<span class="p">};</span>

<span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">"text"</span><span class="p">:</span><span class="s2">"ðŸ‘ŒðŸ‘ŒðŸ‘Œ"</span>
<span class="p">};</span>


<span class="nx">fetch</span><span class="p">(</span><span class="s1">'https://api.sensum.co/v0/sentiment'</span><span class="p">,</span>
<span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'POST'</span><span class="p">,</span>
  <span class="na">body</span> <span class="p">:</span> <span class="nx">body</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="nx">headers</span>
<span class="p">})</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>
</code></pre><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'Content-Type'</span><span class="p">:</span><span class="s">'application/json'</span><span class="p">,</span>
  <span class="s">'Authorization'</span> <span class="p">:</span> <span class="s">'AWS Sig v4 Key'</span><span class="p">,</span>
  <span class="s">'x-api-key'</span> <span class="p">:</span> <span class="s">'PublicDemoKeyForDocumentation'</span>
<span class="p">}</span>


<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">"text"</span><span class="p">:</span><span class="s">"ðŸ‘ŒðŸ‘ŒðŸ‘Œ"</span>
<span class="p">}</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s">'https://api.sensum.co/v0/sentiment'</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">headers</span><span class="p">)</span>

<span class="k">print</span> <span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</code></pre>
<h3 id="responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>200 response</td>
</tr>
</tbody></table>

<h3 id="examples">Examples</h3>

<p>Please refer to the code samples for request and response examples</p>

<blockquote>
<p>Text Only - Unemotional</p>

<p>Request</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"This is nothing"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"emoji_sentiment"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"text_sentiment"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"emotionality"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="err">//Aggregate</span><span class="w"> </span><span class="err">Emotionality</span><span class="w"> </span><span class="err">Score</span><span class="w"> </span><span class="err">from</span><span class="w"> </span><span class="mi">-1</span><span class="p">,</span><span class="err">+</span><span class="mi">1</span><span class="w">
    </span><span class="s2">"negativity"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">Negativity</span><span class="w"> </span><span class="err">Score</span><span class="w"> </span><span class="err">from</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">+</span><span class="mi">1</span><span class="w">
    </span><span class="s2">"positivity"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="w">  </span><span class="err">//</span><span class="w"> </span><span class="err">Positivity</span><span class="w"> </span><span class="err">Score</span><span class="w"> </span><span class="err">from</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">+</span><span class="mi">1</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Text Only - Emotional</p>

<p>Request</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"This was a very good test"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"emoji_sentiment"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"text_sentiment"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"positivity"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.444</span><span class="p">,</span><span class="w">
    </span><span class="s2">"negativity"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"emotionality"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.4927</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Emoji</p>

<p>Request</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"text"</span><span class="p">:</span><span class="s2">"ðŸ‘ŒðŸ‘ŒðŸ‘Œ"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"text_sentiment"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"negativity"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"positivity"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"emotionality"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"emoji_sentiment"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"positivity"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.6575529733</span><span class="p">,</span><span class="w">
    </span><span class="s2">"negativity"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0936431989</span><span class="p">,</span><span class="w">
    </span><span class="s2">"emotionality"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.4236068641</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h2 id="send-data-for-events-analysis">Send data for events analysis</h2>

<p>This endpoint allows the user to send data to the Emotion AI service for analysis. The response will return a series of significant events.</p>

<p>An event is triggered when there is a statistically significant timeseries change detected in an incoming data stream, be that from a Bluetooth sensor or internal sensor such as Accelerometer. Depending on the data stream applied, this can indicate a shift or change in emotional or activity state.</p>

<p>The severity of an event is dependent on</p>

<p>How &ldquo;steep&rdquo; the event is and<br>
How &ldquo;isolated&rdquo; the event is with respect to any events identified before / after it.   </p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST https://api.sensum.co/v0/events</code></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">'Content-Type'</span><span class="p">:</span><span class="s1">'application/json'</span><span class="p">,</span>
  <span class="s1">'Authorization'</span><span class="p">:</span> <span class="s1">'AWS_Sig v4 Key'</span><span class="p">,</span>
  <span class="s1">'x-api-key'</span><span class="p">:</span> <span class="s1">'Public'</span>

<span class="p">};</span>

<span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">"records"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"heartrate"</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="s2">"time"</span><span class="p">:</span> <span class="mi">1502807187332</span><span class="p">,</span>
          <span class="s2">"value"</span><span class="p">:</span> <span class="mf">111.77347523527911</span>
        <span class="p">},</span>
        <span class="p">{</span>
          <span class="s2">"time"</span><span class="p">:</span> <span class="mi">1502807188332</span><span class="p">,</span>
          <span class="s2">"value"</span><span class="p">:</span> <span class="mf">112.89604978090439</span>
        <span class="p">},</span>
        <span class="p">{</span>
          <span class="s2">"time"</span><span class="p">:</span> <span class="mi">1502807189332</span><span class="p">,</span>
          <span class="s2">"value"</span><span class="p">:</span> <span class="mf">112.37719504311998</span>
        <span class="p">},</span>
        <span class="p">{</span>
          <span class="s2">"time"</span><span class="p">:</span> <span class="mi">1502807190332</span><span class="p">,</span>
          <span class="s2">"value"</span><span class="p">:</span> <span class="mf">113.68469103590627</span>
        <span class="p">},</span>
        <span class="p">{</span>
          <span class="s2">"time"</span><span class="p">:</span> <span class="mi">1502807191332</span><span class="p">,</span>
          <span class="s2">"value"</span><span class="p">:</span> <span class="mf">113.67799449012763</span>
        <span class="p">},</span>
        <span class="p">{</span>
          <span class="s2">"time"</span><span class="p">:</span> <span class="mi">1502807192332</span><span class="p">,</span>
          <span class="s2">"value"</span><span class="p">:</span> <span class="mf">112.71988545819869</span>
        <span class="p">},</span>
        <span class="p">{</span>
          <span class="s2">"time"</span><span class="p">:</span> <span class="mi">1502807193332</span><span class="p">,</span>
          <span class="s2">"value"</span><span class="p">:</span> <span class="mf">113.05775062793727</span>
        <span class="p">},</span>
        <span class="p">{</span>
          <span class="s2">"time"</span><span class="p">:</span> <span class="mi">1502807194332</span><span class="p">,</span>
          <span class="s2">"value"</span><span class="p">:</span> <span class="mf">114.53499763344529</span>
        <span class="p">},</span>
        <span class="p">{</span>
          <span class="s2">"time"</span><span class="p">:</span> <span class="mi">1502807195332</span><span class="p">,</span>
          <span class="s2">"value"</span><span class="p">:</span> <span class="mf">115.4964191594706</span>
        <span class="p">},</span>
        <span class="p">{</span>
          <span class="s2">"time"</span><span class="p">:</span> <span class="mi">1502807196332</span><span class="p">,</span>
          <span class="s2">"value"</span><span class="p">:</span> <span class="mf">115.31744641217797</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">};</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://api.sensum.co/v0/events'</span><span class="p">,</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'post'</span><span class="p">,</span>
  <span class="na">data</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">data</span><span class="p">),</span>
  <span class="na">headers</span><span class="p">:</span> <span class="nx">headers</span><span class="p">,</span>
  <span class="na">success</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">data</span><span class="p">));</span>
  <span class="p">}</span>
<span class="p">})</span>
</code></pre><pre class="highlight javascript tab-javascript--nodejs"><code><span class="kr">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'node-fetch'</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">inputBody</span> <span class="o">=</span> <span class="s1">'{
    "records": {
      "heartrate": [
        {
          "time": 1502807187332,
          "value": 111.77347523527911
        },
        {
          "time": 1502807188332,
          "value": 112.89604978090439
        },
        {
          "time": 1502807189332,
          "value": 112.37719504311998
        },
        {
          "time": 1502807190332,
          "value": 113.68469103590627
        },
        {
          "time": 1502807191332,
          "value": 113.67799449012763
        },
        {
          "time": 1502807192332,
          "value": 112.71988545819869
        },
        {
          "time": 1502807193332,
          "value": 113.05775062793727
        },
        {
          "time": 1502807194332,
          "value": 114.53499763344529
        },
        {
          "time": 1502807195332,
          "value": 115.4964191594706
        },
        {
          "time": 1502807196332,
          "value": 115.31744641217797
        }
      ]
    }
  }
'</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">'Content-Type'</span><span class="p">:</span><span class="s1">'application/json'</span><span class="p">,</span>
  <span class="s1">'Authorization'</span> <span class="p">:</span> <span class="s1">'AWS Sig v4 Key'</span><span class="p">,</span>
  <span class="s1">'x-api-key'</span> <span class="p">:</span> <span class="s1">'PublicDemoKeyForDocumentation'</span>

<span class="p">};</span>

<span class="nx">fetch</span><span class="p">(</span><span class="s1">'https://api.sensum.co/v0/events'</span><span class="p">,</span>
<span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'POST'</span><span class="p">,</span>
  <span class="na">body</span><span class="p">:</span> <span class="nx">inputBody</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="nx">headers</span>
<span class="p">})</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>
</code></pre><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'Content-Type'</span><span class="p">:</span><span class="s">'application/json'</span><span class="p">,,</span>
  <span class="s">'Authorization'</span> <span class="p">:</span> <span class="s">'AWS Sig v4 Key'</span><span class="p">,</span>
  <span class="s">'x-api-key'</span> <span class="p">:</span> <span class="s">'PublicDemoKeyForDocumentation'</span>
<span class="p">}</span>

<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"records"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"heartrate"</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="s">"time"</span><span class="p">:</span> <span class="mi">1502807187332</span><span class="p">,</span>
          <span class="s">"value"</span><span class="p">:</span> <span class="mf">111.77347523527911</span>
        <span class="p">},</span>
        <span class="p">{</span>
          <span class="s">"time"</span><span class="p">:</span> <span class="mi">1502807188332</span><span class="p">,</span>
          <span class="s">"value"</span><span class="p">:</span> <span class="mf">112.89604978090439</span>
        <span class="p">},</span>
        <span class="p">{</span>
          <span class="s">"time"</span><span class="p">:</span> <span class="mi">1502807189332</span><span class="p">,</span>
          <span class="s">"value"</span><span class="p">:</span> <span class="mf">112.37719504311998</span>
        <span class="p">},</span>
        <span class="p">{</span>
          <span class="s">"time"</span><span class="p">:</span> <span class="mi">1502807190332</span><span class="p">,</span>
          <span class="s">"value"</span><span class="p">:</span> <span class="mf">113.68469103590627</span>
        <span class="p">},</span>
        <span class="p">{</span>
          <span class="s">"time"</span><span class="p">:</span> <span class="mi">1502807191332</span><span class="p">,</span>
          <span class="s">"value"</span><span class="p">:</span> <span class="mf">113.67799449012763</span>
        <span class="p">},</span>
        <span class="p">{</span>
          <span class="s">"time"</span><span class="p">:</span> <span class="mi">1502807192332</span><span class="p">,</span>
          <span class="s">"value"</span><span class="p">:</span> <span class="mf">112.71988545819869</span>
        <span class="p">},</span>
        <span class="p">{</span>
          <span class="s">"time"</span><span class="p">:</span> <span class="mi">1502807193332</span><span class="p">,</span>
          <span class="s">"value"</span><span class="p">:</span> <span class="mf">113.05775062793727</span>
        <span class="p">},</span>
        <span class="p">{</span>
          <span class="s">"time"</span><span class="p">:</span> <span class="mi">1502807194332</span><span class="p">,</span>
          <span class="s">"value"</span><span class="p">:</span> <span class="mf">114.53499763344529</span>
        <span class="p">},</span>
        <span class="p">{</span>
          <span class="s">"time"</span><span class="p">:</span> <span class="mi">1502807195332</span><span class="p">,</span>
          <span class="s">"value"</span><span class="p">:</span> <span class="mf">115.4964191594706</span>
        <span class="p">},</span>
        <span class="p">{</span>
          <span class="s">"time"</span><span class="p">:</span> <span class="mi">1502807196332</span><span class="p">,</span>
          <span class="s">"value"</span><span class="p">:</span> <span class="mf">115.31744641217797</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">}</span>


<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s">'https://api.sensum.co/v0/events'</span><span class="p">,</span> <span class="n">params</span> <span class="o">=</span> <span class="n">data</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">headers</span><span class="p">)</span>

<span class="k">print</span> <span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</code></pre>
<blockquote>
<p>Body parameter</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"records"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"heartrate"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1502807187332</span><span class="p">,</span><span class="w">
          </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">111.77347523527911</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1502807188332</span><span class="p">,</span><span class="w">
          </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">112.89604978090439</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1502807189332</span><span class="p">,</span><span class="w">
          </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">112.37719504311998</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1502807190332</span><span class="p">,</span><span class="w">
          </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">113.68469103590627</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1502807191332</span><span class="p">,</span><span class="w">
          </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">113.67799449012763</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1502807192332</span><span class="p">,</span><span class="w">
          </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">112.71988545819869</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1502807193332</span><span class="p">,</span><span class="w">
          </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">113.05775062793727</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1502807194332</span><span class="p">,</span><span class="w">
          </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">114.53499763344529</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1502807195332</span><span class="p">,</span><span class="w">
          </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">115.4964191594706</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1502807196332</span><span class="p">,</span><span class="w">
          </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">115.31744641217797</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id="responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>Successful request</td>
</tr>
</tbody></table>

<h3 id="response-headers">Response Headers</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Header</th>
<th>Type</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td>Access-Control-Allow-Origin</td>
<td>string</td>
<td></td>
<td></td>
</tr>
</tbody></table>

<blockquote>
<p>Example responses</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"events"</span><span class="p">:{</span><span class="w">
        </span><span class="s2">"heartrate"</span><span class="p">:[</span><span class="w">
            </span><span class="p">{</span><span class="s2">"time"</span><span class="p">:</span><span class="mi">1502807187000</span><span class="p">,</span><span class="s2">"value"</span><span class="p">:</span><span class="s2">"min"</span><span class="p">,</span><span class="s2">"severity"</span><span class="p">:</span><span class="mf">0.03176537181134584</span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="s2">"time"</span><span class="p">:</span><span class="mi">1502807196000</span><span class="p">,</span><span class="s2">"value"</span><span class="p">:</span><span class="s2">"max"</span><span class="p">,</span><span class="s2">"severity"</span><span class="p">:</span><span class="mf">0.03176537181134584</span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"stats"</span><span class="p">:{</span><span class="w">
        </span><span class="s2">"heartrate"</span><span class="p">:{</span><span class="w">
            </span><span class="s2">"avg"</span><span class="p">:</span><span class="mf">113.55359048765672</span><span class="p">,</span><span class="w">
            </span><span class="s2">"duration"</span><span class="p">:</span><span class="mi">9</span><span class="p">,</span><span class="w">
            </span><span class="s2">"max"</span><span class="p">:</span><span class="mf">115.4964191594706</span><span class="p">,</span><span class="w">
            </span><span class="s2">"min"</span><span class="p">:</span><span class="mf">111.77347523527911</span><span class="p">,</span><span class="w">
            </span><span class="s2">"std"</span><span class="p">:</span><span class="mf">1.175057115344551</span><span class="p">,</span><span class="w">
            </span><span class="s2">"percentiles"</span><span class="p">:{</span><span class="s2">"10"</span><span class="p">:</span><span class="mf">112.3168230623359</span><span class="p">,</span><span class="s2">"50"</span><span class="p">:</span><span class="mf">113.36787255903245</span><span class="p">,</span><span class="s2">"90"</span><span class="p">:</span><span class="mf">115.33534368690724</span><span class="p">}}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"records"</span><span class="p">:{</span><span class="w">
        </span><span class="s2">"arousal"</span><span class="p">:[</span><span class="w">
            </span><span class="p">{</span><span class="s2">"time"</span><span class="p">:</span><span class="mi">1502807187332</span><span class="p">,</span><span class="s2">"value"</span><span class="p">:</span><span class="mf">5.359549491038813e-15</span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="s2">"time"</span><span class="p">:</span><span class="mi">1502807188332</span><span class="p">,</span><span class="s2">"value"</span><span class="p">:</span><span class="mf">0.052921639437207874</span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="s2">"time"</span><span class="p">:</span><span class="mi">1502807189332</span><span class="p">,</span><span class="s2">"value"</span><span class="p">:</span><span class="mf">0.028461220785887004</span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="s2">"time"</span><span class="p">:</span><span class="mi">1502807190332</span><span class="p">,</span><span class="s2">"value"</span><span class="p">:</span><span class="mf">0.09010062973692541</span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="s2">"time"</span><span class="p">:</span><span class="mi">1502807191332</span><span class="p">,</span><span class="s2">"value"</span><span class="p">:</span><span class="mf">0.08978493383721622</span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="s2">"time"</span><span class="p">:</span><span class="mi">1502807192332</span><span class="p">,</span><span class="s2">"value"</span><span class="p">:</span><span class="mf">0.044616707881203976</span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="s2">"time"</span><span class="p">:</span><span class="mi">1502807193332</span><span class="p">,</span><span class="s2">"value"</span><span class="p">:</span><span class="mf">0.06054471797280525</span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="s2">"time"</span><span class="p">:</span><span class="mi">1502807194332</span><span class="p">,</span><span class="s2">"value"</span><span class="p">:</span><span class="mf">0.13018671519236316</span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="s2">"time"</span><span class="p">:</span><span class="mi">1502807195332</span><span class="p">,</span><span class="s2">"value"</span><span class="p">:</span><span class="mf">0.17551110237516387</span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="s2">"time"</span><span class="p">:</span><span class="mi">1502807196332</span><span class="p">,</span><span class="s2">"value"</span><span class="p">:</span><span class="mf">0.16707377298958567</span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"exec_time"</span><span class="p">:</span><span class="mf">0.12196207046508789</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<aside class="warning">
To perform this operation, you must be authenticated by means of the following headers:
X-API-Key, Authorization
</aside>

<h2 id="errors">Errors</h2>

<p><strong>SensumAPI</strong> uses the following error codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request - Your Request may have caused an error</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized - This error will likely occur if the Cognito Authorization Header (AWS Signature v4) is either missing or invalid.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden -This error will likely occur if the API Key Header is either invalid or missing.</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed - You have attempted to make a request using a HTTP Method that is invalid for the requested resource.</td>
</tr>
<tr>
<td>429</td>
<td>Too Many Requests - You have made more requests than is allowed under the usage plan.</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error - There is an error with our service</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable - Our service is down for maintenance. Please try again later.</td>
</tr>
</tbody></table>

          <h1 id="sensumsdk-android">SensumSDK - Android</h1>

<h2 id="android-device-compatibility">Android Device Compatibility</h2>

<p>The Android version of <strong>SensumSDK</strong> can be installed on devices with <strong>6.0 (Marshmallow)</strong> up to <strong>8.0 (Oreo)</strong>.</p>

<p>We recommend the <strong>Samsung S6</strong>, <strong>S7</strong>, <strong>S8</strong>, <strong>OnePlus X and above</strong> or the <strong>Google Pixel</strong> as suitable devices for reliable bluetooth functionality. </p>

<h2 id="bluetooth-device-compatibility">Bluetooth Device Compatibility</h2>

<ul>
<li>The Android <strong>SensumSDK</strong> supports connecting to BLE and Bluetooth devices for reading heart rate measurements. For a list of tested compatible devices please contact us - hello@sensum.co</li>
</ul>

<p><strong>Note:</strong> This document is regularly updated with new devices. Please contact us for integration details. GSR data is only accessible from Shimmer devices at present.</p>

<h2 id="accepted-biometric-data-inputs">Accepted Biometric Data Inputs</h2>

<p>The Android <strong>SensumSDK</strong> can accept the following <a href = "#available-metrics">metrics</a>:</p>

<ul>
<li>Heart Rate</li>
<li>GSR</li>
<li>Location Latitude</li>
<li>Location Longitude</li>
<li>Location Altitude</li>
<li>Location Accuracy</li>
<li>Location Speed</li>
<li>Acceleration</li>
<li>Acceleration X</li>
<li>Acceleration Y</li>
<li>Acceleration Z</li>
</ul>

<h2 id="service-constants">Service Constants</h2>

<p>These constants can be used to construct message bundles that are then relayed to the Emotion AI service to send and retrieve data.</p>

<p>One example of a call to the service would be to send credentials in order to authenticate a user. See <a href = "#submit-credentials-to-service-for-authorization">&ldquo;Submit Credentials to service for authorization&rdquo;</a> for an example in how these bundles are constructed.</p>

<h3 id="api-base-url">API Base URL</h3>

<p><code class="prettyprint">public static final String API_BASEURL = &quot;api-baseurl&quot;</code></p>

<p>This is used to pass the base url for API to the <strong>SensumSDK</strong> service which is used for setting up communication with the <strong>SensumAPI</strong></p>

<h3 id="api-key">API Key</h3>

<p><code class="prettyprint">public static final String API_KEY = &quot;api-key&quot;</code></p>

<p>This is used to pass the API key to the <strong>SensumSDK</strong> service which is used for setting up communication with the <strong>SensumAPI</strong></p>

<h3 id="google-id-token">Google Id Token</h3>

<p><code class="prettyprint">public static final String GOOGLE_ID_TOKEN = &quot;google-id-token&quot;</code></p>

<p>This is used to pass the Google id token to the <strong>SensumSDK</strong> service which is used for setting up communication with the <strong>SensumAPI</strong></p>

<h3 id="google-web-client-id">Google Web Client Id</h3>

<p><code class="prettyprint">public static final String GOOGLE_WEB_CLIENT_ID = &quot;google-web-client-id&quot;</code></p>

<p>This is used to pass the Google web client id to the <strong>SensumSDK</strong> service which is used for setting up communication with the <strong>SensumAPI</strong></p>

<h3 id="google-login">Google Login</h3>

<p><code class="prettyprint">public static final int GOOGLE_LOGIN = 126</code></p>

<p>This is used to pass a google login message to the <strong>SensumSDK</strong> service</p>

<h3 id="login-filter">Login Filter</h3>

<p><code class="prettyprint">public static final String LOGIN_FILTER = &quot;login-filter&quot;</code></p>

<p>This is used to pass a message from the <strong>SensumSDK</strong> service which is used as an intent filter at the front end for the user login</p>

<h3 id="identity-pool-id">Identity Pool Id</h3>

<p><code class="prettyprint">public static final String IDENTITY_POOL_ID = &quot;identity-poolid&quot;</code></p>

<p>This is used to pass the AWS identity pool id to the <strong>SensumSDK</strong> service which is used for user authentication</p>

<h3 id="heart-rate-filter">Heart Rate Filter</h3>

<p><code class="prettyprint">public static final String HR_FILTER = &quot;hr-filter&quot;</code></p>

<p>This is used to pass a message from the <strong>SensumSDK</strong> service which is used as an intent filter at the front end for receiving the heart rate value</p>

<h3 id="heart-rate-event-filter">Heart Rate Event Filter</h3>

<p><code class="prettyprint">public static final String HR_EVENT_FILTER = &quot;hr-event-filter&quot;</code></p>

<p>This is used to pass a message from the <strong>SensumSDK</strong> service which is used as an intent filter at the front end for receiving the heart rate events from the <strong>SensumAPI</strong></p>

<h3 id="heart-rate-arousal-filter">Heart Rate Arousal Filter</h3>

<p><code class="prettyprint">public static final String AROUSAL_FILTER = &quot;arousal-filter&quot;</code></p>

<p>This is used to pass a message from the <strong>SensumSDK</strong> service which is used as an intent filter at the front end for receiving the heart rate arousal from the <strong>SensumAPI</strong></p>

<h3 id="gps-filter">GPS Filter</h3>

<p><code class="prettyprint">public static final String GPS_FILTER = &quot;gps-filter&quot;</code></p>

<p>This is used to pass a message from the <strong>SensumSDK</strong> service which is used as an intent filter at the front end for receiving the GPS values</p>

<h3 id="speed-value">Speed Value</h3>

<p><code class="prettyprint">public static final String SPEED_VALUE = &quot;speed-value&quot;</code></p>

<p>This is used to pass the captured GPS speed value</p>

<h3 id="latitude-value">Latitude Value</h3>

<p><code class="prettyprint">public static final String LATITUDE_VALUE = &quot;latitude-value&quot;</code></p>

<p>This is used to pass the captured GPS latitude value</p>

<h3 id="longitude-value">Longitude Value</h3>

<p><code class="prettyprint">public static final String LONGITUDE_VALUE = &quot;longtitude-value&quot;</code></p>

<p>This is used to pass the captured GPS longitude value</p>

<h3 id="altitude-value">Altitude Value</h3>

<p><code class="prettyprint">public static final String ALTITUDE_VALUE = &quot;altitude-value&quot;</code></p>

<p>This is used to pass the captured GPS altitude value</p>

<h3 id="bearing-value">Bearing Value</h3>

<p><code class="prettyprint">public static final String BEARING_VALUE = &quot;bearing-value&quot;</code></p>

<p>This is used to pass the captured GPS bearing value</p>

<h3 id="accuracy-value">Accuracy Value</h3>

<p><code class="prettyprint">public static final String ACCURACY_VALUE = &quot;accuracy-value&quot;</code></p>

<p>This is used to pass the captured GPS accuracy value</p>

<h3 id="gps-event-filter">GPS Event Filter</h3>

<p><code class="prettyprint">public static final String GPS_EVENT_FILTER = &quot;gps-event-filter&quot;</code></p>

<p>This is used to pass a message from the <strong>SensumSDK</strong> service which is used as an intent filter at the front end for receiving the GPS events from the <strong>SensumAPI</strong></p>

<h3 id="accelerometer-filter">Accelerometer Filter</h3>

<p><code class="prettyprint">public static final String ACC_FILTER = &quot;acc-filter&quot;</code></p>

<p>This is used to pass a message from the <strong>SensumSDK</strong> service which is used as an intent filter at the front end for receiving the accelerometer values</p>

<h3 id="x-value">X Value</h3>

<p><code class="prettyprint">public static final String X_VALUE = &quot;x-value&quot;</code></p>

<p>This is used to pass the captured accelerometer x value</p>

<h3 id="y-value">Y Value</h3>

<p><code class="prettyprint">public static final String Y_VALUE = &quot;y-value&quot;</code></p>

<p>This is used to pass the captured accelerometer y value</p>

<h3 id="z-value">Z Value</h3>

<p><code class="prettyprint">public static final String Z_VALUE = &quot;z-value&quot;</code></p>

<p>This is used to pass the captured accelerometer z value</p>

<h3 id="accelerometer-event-filter">Accelerometer Event Filter</h3>

<p><code class="prettyprint">public static final String ACC_EVENT_FILTER = &quot;acc-event-filter&quot;</code></p>

<p>This is used to pass a message from the <strong>SensumSDK</strong> service which is used as an intent filter at the front end for receiving the accelerometer events from the <strong>SensumAPI</strong></p>

<h3 id="accelerometer-registration">Accelerometer Registration</h3>

<p><code class="prettyprint">public static final String ACC_FAILED_REGISTERED = &quot;accelerometer-registration&quot;</code></p>

<p>This is used to pass a message from the <strong>SensumSDK</strong> service which is used as an intent filter at the front end for checking accelerometer registration</p>

<h3 id="gsr-filter">GSR Filter</h3>

<p><code class="prettyprint">public static final String GSR_FILTER = &quot;gsr-filter&quot;</code></p>

<p>This is used to pass a message from the <strong>SensumSDK</strong> service which is used as an intent filter at the front end for receiving the GSR values</p>

<h3 id="gsr-event-filter">GSR Event Filter</h3>

<p><code class="prettyprint">public static final String GSR_EVENT_FILTER = &quot;gsr-event-filter&quot;</code></p>

<p>This is used to pass a message from the <strong>SensumSDK</strong> service which is used as an intent filter at the front end for receiving the GSR events from the <strong>SensumAPI</strong></p>

<h3 id="extra-data">Extra Data</h3>

<p><code class="prettyprint">public static final String EXTRA_DATA = &quot;extra-data&quot;</code></p>

<p>This is used to bundle up extra data to the intents</p>

<h3 id="acceleration-capture">Acceleration Capture</h3>

<p><code class="prettyprint">public static final String ACCELERATION_CAPTURE = &quot;acceleration-capture&quot;</code></p>

<p>This is used to enable/disable capturing of accelerometer data which is sent to the <strong>SensumAPI</strong></p>

<h3 id="gps-capture">GPS Capture</h3>

<p><code class="prettyprint">public static final String GPS_CAPTURE = &quot;gps-capture&quot;</code></p>

<p>This is used to enable/disable capturing of GPS data which is sent to the <strong>SensumAPI</strong></p>

<h3 id="hr-capture">HR Capture</h3>

<p><code class="prettyprint">public static final String HR_CAPTURE = &quot;heartrate-capture&quot;</code></p>

<p>This is used to enable/disable capturing of heart rate data which is sent to the <strong>SensumAPI</strong></p>

<h3 id="input-capture">Input Capture</h3>

<p><code class="prettyprint">public static final String INPUT_CAPTURE = &quot;input-capture&quot;</code></p>

<p>This is used to enable/disable capturing of text/emoji data which is sent to the <strong>SensumAPI</strong></p>

<h3 id="gsr-capture">GSR Capture</h3>

<p><code class="prettyprint">public static final String GSR_CAPTURE = &quot;gsr-capture&quot;</code></p>

<p>This is used to enable/disable capturing of GSR data which is sent to the <strong>SensumAPI</strong></p>

<h3 id="data-rate-send">Data Rate Send</h3>

<p><code class="prettyprint">public static final String DATA_RATE_SEND = &quot;send-rate&quot;</code></p>

<p>This is used to pass the interval rate (in milliseconds) for the data to be sent to the <strong>SensumAPI</strong></p>

<h3 id="api-response">API Response</h3>

<p><code class="prettyprint">public static final String API_RESPONSE = &quot;api-response&quot;</code></p>

<p>This is used to pass message from the <strong>SensumSDK</strong> service for the <strong>SensumAPI</strong> response</p>

<h3 id="toast-message">Toast Message</h3>

<p><code class="prettyprint">public static final String TOAST_MESSAGE = &quot;toast-message&quot;</code></p>

<p>This is used to pass informative toast message from the <strong>SensumSDK</strong> service</p>

<h3 id="input-sentiment-text">Input Sentiment Text</h3>

<p><code class="prettyprint">public static final int INPUT_SENTIMENT_TEXT = 128</code></p>

<p>This is used to filter/pass text &amp; emoji message for sentiment analysis to the <strong>SensumSDK</strong> service</p>

<h3 id="emoji-sentiment-filter">Emoji Sentiment Filter</h3>

<p><code class="prettyprint">public static final String EMOJI_SENTIMENT_FILTER = &quot;emoji-sentiment-filter&quot;</code></p>

<p>This is used to pass Emoji value to the <strong>SensumSDK</strong> service which is passed to the API for Sentiment analysis</p>

<h3 id="text-sentiment-filter">Text Sentiment Filter</h3>

<p><code class="prettyprint">public static final String TEXT_SENTIMENT_FILTER = &quot;text-sentiment-filter&quot;</code></p>

<p>This is used to pass Text value to the <strong>SensumSDK</strong> service which is passed to the API for Sentiment analysis</p>

<h3 id="emotionality">Emotionality</h3>

<p><code class="prettyprint">public static final String EMOTIONALITY = &quot;emotionality&quot;</code></p>

<p>This is used to pass a message from the <strong>SensumSDK</strong> service which is used as an intent filter at the front end for receiving Emotionality value (Sentiment Analysis) from the <strong>SensumAPI</strong></p>

<h3 id="positivity">Positivity</h3>

<p><code class="prettyprint">public static final String POSITIVITY = &quot;positivity&quot;</code></p>

<p>This is used to pass a message from the <strong>SensumSDK</strong> service which is used as an intent filter at the front end for receiving Positivity value (Sentiment Analysis) from the <strong>SensumAPI</strong></p>

<h3 id="negativity">Negativity</h3>

<p><code class="prettyprint">public static final String NEGATIVITY = &quot;negativity&quot;</code></p>

<p>This is used to pass a message from the <strong>SensumSDK</strong> service which is used as an intent filter at the front end for receiving Negativity value (Sentiment Analysis) from the <strong>SensumAPI</strong></p>

<h3 id="cancel-capture">Cancel Capture</h3>

<p><code class="prettyprint">public static final int CANCEL_CAPTURE = 112</code></p>

<p>This is used to cancel sending of the captured data to the <strong>SensumAPI</strong></p>

<h3 id="start-capture">Start Capture</h3>

<p><code class="prettyprint">public static final int START_CAPTURE = 113</code></p>

<p>This is used to start sending of the captured data to the <strong>SensumAPI</strong></p>

<h3 id="hello">Hello</h3>

<p><code class="prettyprint">public static final int HELLO = 127</code></p>

<p>This is used for the initial communication between developer and frontend to demo how it works</p>

<h3 id="hello-filter">Hello Filter</h3>

<p><code class="prettyprint">public static final String HELLO_FILTER = &quot;hello-filter&quot;</code></p>

<p>This is used to filter for hello at the front end</p>

<h3 id="device-name">Device Name</h3>

<p><code class="prettyprint">public static final String DEVICE_NAME = &quot;device-name&quot;</code></p>

<p>This is used to get the connected device name</p>

<h3 id="device-address">Device Address</h3>

<p><code class="prettyprint">public static final String DEVICE_ADDRESS = &quot;device-address&quot;</code></p>

<p>This is used to get the connected device address</p>

<h3 id="connection">Connection</h3>

<p><code class="prettyprint">public static final String CONNECTION = &quot;connection&quot;</code></p>

<p>This is used to pass a connection message from the <strong>SensumSDK</strong> service to the front end</p>

<h3 id="ble-scan">BLE Scan</h3>

<p><code class="prettyprint">public static final int BLE_SCAN = 102</code></p>

<p>This is used to pass a BLE scan message to the <strong>SensumSDK</strong> service</p>

<h3 id="connect-ble-device">Connect BLE Device</h3>

<p><code class="prettyprint">public static final int CONNECT_BLE = 101</code></p>

<p>This is used to pass a connect BLE device message to the <strong>SensumSDK</strong> service</p>

<h3 id="ble-connection-filter">BLE Connection Filter</h3>

<p><code class="prettyprint">public static final String BLE_CONNECTION_FILTER = &quot;ble-connected-filter&quot;</code></p>

<p>This is used to pass a BLE connection message from the <strong>SensumSDK</strong> service which is used as an intent filter at the front end</p>

<h3 id="ble-device-filter">BLE Device Filter</h3>

<p><code class="prettyprint">public static final String BLE_DEVICE_FILTER = &quot;ble-filter&quot;</code></p>

<p>This is used to pass a message from the <strong>SensumSDK</strong> service which is used as an intent filter at the front end for the connected ble device</p>

<h3 id="ble-device-name">BLE Device Name</h3>

<p><code class="prettyprint">public static final String BLE_DEVICE_NAME = &quot;ble-device-name&quot;</code></p>

<p>This is used to pass the BLE device name from the <strong>SensumSDK</strong> service</p>

<h3 id="disconnect-ble-device">Disconnect BLE Device</h3>

<p><code class="prettyprint">public static final int DISCONNECT_BLE = 134</code></p>

<p>This is used to disconnect a BLE device</p>

<h3 id="ble-connectivity">BLE Connectivity</h3>

<p><code class="prettyprint">public static final String BLE_CONNECTIVITY = &quot;ble-connectivity&quot;</code></p>

<p>This is used to pass a BLE connectivity message from the <strong>SensumSDK</strong> service to the front end</p>

<h3 id="connected-devices">Connected Devices</h3>

<p><code class="prettyprint">public static final int CONNECTED_DEVICES = 136</code></p>

<p>This is used to pass a message to the <strong>SensumSDK</strong> to get the connected device names</p>

<h3 id="connected-devices-filter">Connected Devices Filter</h3>

<p><code class="prettyprint">public static final String CONNECTED_DEVICES_FILTER = &quot;connected-devices-filter&quot;</code></p>

<p>This is used to filter for the connected devices</p>

<h3 id="bluetooth-device-name">Bluetooth Device Name</h3>

<p><code class="prettyprint">public static final String BLUETOOTH_DEVICE_NAME = &quot;bluetooth-device-name&quot;</code></p>

<p>This is used to pass the bluetooth device name from the <strong>SensumSDK</strong> service</p>

<h3 id="bluetooth-scan">Bluetooth Scan</h3>

<p><code class="prettyprint">public static final int BLUETOOTH_SCAN = 107</code></p>

<p>This is used to pass a bluetooth scan message to the <strong>SensumSDK</strong> service</p>

<h3 id="disconnect-bluetooth-device">Disconnect Bluetooth Device</h3>

<p><code class="prettyprint">public static final int DISCONNECT_BLUETOOTH = 135</code></p>

<p>This is used to disconnect a bluetooth device</p>

<h3 id="connect-bluetooth-device">Connect Bluetooth Device</h3>

<p><code class="prettyprint">public static final int CONNECT_BLUETOOTH_DEVICE = 108</code></p>

<p>This is used to pass a connect bluetooth device message to the <strong>SensumSDK</strong> service</p>

<h3 id="bluetooth-connectivity">Bluetooth Connectivity</h3>

<p><code class="prettyprint">public static final String BT_CONNECTIVITY = &quot;bt-connectivity&quot;</code></p>

<p>This is used to pass a bluetooth connectivity message from the <strong>SensumSDK</strong> service to the front end</p>

<h3 id="bluetooth-connection-filter">Bluetooth Connection Filter</h3>

<p><code class="prettyprint">public static final String BLUETOOTH_CONNECTION_FILTER = &quot;bluetooth-connected-filter&quot;</code></p>

<p>This is used to filter for bluetooth connection at the front end</p>

<h3 id="bluetooth-device-filter">Bluetooth Device Filter</h3>

<p><code class="prettyprint">public static final String BLUETOOTH_DEVICE_FILTER = &quot;bluetooth-device-filter&quot;</code></p>

<p>This is used to filter for bluetooth device at the front end</p>

<h3 id="device-disconnected">Device Disconnected</h3>

<p><code class="prettyprint">public static final String DEVICE_DISCONNECTED = &quot;com.example.bluetooth.le.ACTION_GATT_DISCONNECTED&quot;</code></p>

<p>This is used to pass a message from the <strong>SensumSDK</strong> service in case of any device disconnection</p>

<h3 id="realm-response">Realm Response</h3>

<p><code class="prettyprint">public static final String REALM_RESPONSE = &quot;realm-response&quot;</code></p>

<p>This is used to pass message from the <strong>SensumSDK</strong> service for data manipulation in realm for a session</p>

<h2 id="example-methods">Example Methods</h2>

<p>Examples available in the &lsquo;Android&rsquo; tab.</p>

<h3 id="initiate-connection-to-service">Initiate connection to service</h3>
<pre class="highlight java tab-java"><code>      <span class="c1">// class fields</span>
    <span class="n">Messenger</span> <span class="n">mServiceMessenger</span><span class="o">;</span>
    <span class="n">SdkService</span> <span class="n">mService</span><span class="o">;</span>
    <span class="kt">boolean</span> <span class="n">mIsBound</span><span class="o">;</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="n">ServiceConnection</span> <span class="n">mConnection</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ServiceConnection</span><span class="o">()</span> <span class="o">{</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onServiceConnected</span><span class="o">(</span><span class="n">ComponentName</span> <span class="n">componentName</span><span class="o">,</span> <span class="n">IBinder</span> <span class="n">iBinder</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">SdkService</span><span class="o">.</span><span class="na">LocalBinder</span> <span class="n">binder</span> <span class="o">=</span> <span class="o">(</span><span class="n">SdkService</span><span class="o">.</span><span class="na">LocalBinder</span><span class="o">)</span> <span class="n">iBinder</span><span class="o">;</span>
            <span class="n">mService</span> <span class="o">=</span> <span class="n">binder</span><span class="o">.</span><span class="na">getService</span><span class="o">();</span>
            <span class="n">mServiceMessenger</span> <span class="o">=</span> <span class="n">mService</span><span class="o">.</span><span class="na">mServiceMessenger</span><span class="o">;</span>
            <span class="k">if</span> <span class="o">(!</span><span class="n">mIsBound</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">mIsBound</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>

        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onServiceDisconnected</span><span class="o">(</span><span class="n">ComponentName</span> <span class="n">componentName</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">// handle disconnect</span>
        <span class="o">}</span>
    <span class="o">};</span>
</code></pre>
<p><code class="prettyprint">private final ServiceConnection mConnection = new ServiceConnection()</code></p>

<p>Connection made to the service. Once bound to the service, the binder object is passed through to messenger to set it up.</p>

<h3 id="submit-credentials-to-service-for-authorization-google-sign-in">Submit Credentials to service for authorization (Google Sign-In)</h3>
<pre class="highlight java tab-java"><code>    <span class="kt">void</span> <span class="nf">submit</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">Bundle</span> <span class="n">bundle</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Bundle</span><span class="o">();</span>
        <span class="n">bundle</span><span class="o">.</span><span class="na">putString</span><span class="o">(</span><span class="n">API_BASEURL</span><span class="o">,</span> <span class="n">apiBaseUrl</span><span class="o">);</span>
        <span class="n">bundle</span><span class="o">.</span><span class="na">putString</span><span class="o">(</span><span class="n">API_KEY</span><span class="o">,</span> <span class="n">apiKey</span><span class="o">);</span>
        <span class="n">bundle</span><span class="o">.</span><span class="na">putString</span><span class="o">(</span><span class="n">IDENTITY_POOL_ID</span><span class="o">,</span> <span class="n">identityPoolId</span><span class="o">);</span>
        <span class="n">bundle</span><span class="o">.</span><span class="na">putString</span><span class="o">(</span><span class="n">GOOGLE_ID_TOKEN</span><span class="o">,</span> <span class="n">googleIdToken</span><span class="o">);</span>
        <span class="n">bundle</span><span class="o">.</span><span class="na">putString</span><span class="o">(</span><span class="n">GOOGLE_WEB_CLIENT_ID</span><span class="o">,</span> <span class="n">googleWebClientId</span><span class="o">);</span>
        <span class="n">sendToService</span><span class="o">(</span><span class="n">bundle</span><span class="o">,</span> <span class="n">GOOGLE_LOGIN</span><span class="o">);</span>
    <span class="o">}</span>
</code></pre>
<p>Follow Google&rsquo;s <a href = "https://developers.google.com/identity/sign-in/android/start-integrating">instructions</a> to add Google Sign-In to your application.</p>

<p>Once successfully implemented you must send the Google Id token for the Google Sign-In application to us to authenticate access. You can contact us at hello@sensum.co.</p>

<p><code class="prettyprint">void submit()</code></p>

<p>Sets up the credential bundle to be sent to the <strong>SensumSDK</strong> service this needs to be sent first to the <strong>SensumSDK</strong> service as only authenticated users can use the service.</p>

<h3 id="send-a-data-message-to-the-service">Send a data message to the service</h3>
<pre class="highlight java tab-java"><code>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">sendToService</span><span class="o">(</span><span class="n">Bundle</span> <span class="n">bundle</span><span class="o">,</span> <span class="kt">int</span> <span class="n">argValue</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Message</span> <span class="n">message</span> <span class="o">=</span> <span class="n">Message</span><span class="o">.</span><span class="na">obtain</span><span class="o">();</span>
        <span class="n">message</span><span class="o">.</span><span class="na">arg1</span> <span class="o">=</span> <span class="n">argValue</span><span class="o">;</span>
        <span class="n">message</span><span class="o">.</span><span class="na">setData</span><span class="o">(</span><span class="n">bundle</span><span class="o">);</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="n">mServiceMessenger</span><span class="o">.</span><span class="na">send</span><span class="o">(</span><span class="n">message</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">RemoteException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>
</code></pre>
<p><code class="prettyprint">public void sendToService(Bundle bundle, int argValue)</code></p>

<p>Send message to the service.</p>

<ul>
<li><strong>Parameters:</strong>

<ul>
<li><code class="prettyprint">bundle</code> â€” any data that needs passed to the service</li>
<li><code class="prettyprint">argValue</code> â€” for service handler to switch on</li>
</ul></li>
</ul>

<h3 id="create-new-broadcast-receiver-object">Create New Broadcast Receiver Object</h3>
<pre class="highlight java tab-java"><code>     <span class="kd">private</span> <span class="n">BroadcastReceiver</span> <span class="n">mMessageReceiver</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BroadcastReceiver</span><span class="o">()</span> <span class="o">{</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onReceive</span><span class="o">(</span><span class="n">Context</span> <span class="n">context</span><span class="o">,</span> <span class="n">Intent</span> <span class="n">intent</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">String</span> <span class="n">action</span> <span class="o">=</span> <span class="n">intent</span><span class="o">.</span><span class="na">getAction</span><span class="o">();</span>
            <span class="k">switch</span> <span class="o">(</span><span class="n">action</span><span class="o">)</span> <span class="o">{</span>

                <span class="k">case</span> <span class="nl">HELLO_FILTER:</span>
                    <span class="n">Toast</span><span class="o">.</span><span class="na">makeText</span><span class="o">(</span><span class="n">MainActivity</span><span class="o">.</span><span class="na">this</span><span class="o">,</span> <span class="n">intent</span><span class="o">.</span><span class="na">getStringExtra</span><span class="o">(</span><span class="n">EXTRA_DATA</span><span class="o">),</span> <span class="n">Toast</span><span class="o">.</span><span class="na">LENGTH_LONG</span><span class="o">).</span><span class="na">show</span><span class="o">();</span>
                    <span class="k">break</span><span class="o">;</span>
                <span class="k">case</span> <span class="nl">GPS_FILTER:</span>
                    <span class="n">Bundle</span> <span class="n">gpsBundle</span> <span class="o">=</span> <span class="n">intent</span><span class="o">.</span><span class="na">getBundleExtra</span><span class="o">(</span><span class="n">EXTRA_DATA</span><span class="o">);</span>
                    <span class="k">break</span><span class="o">;</span>
                <span class="k">case</span> <span class="nl">ACC_FILTER:</span>
                    <span class="n">Bundle</span> <span class="n">accBundle</span> <span class="o">=</span> <span class="n">intent</span><span class="o">.</span><span class="na">getBundleExtra</span><span class="o">(</span><span class="n">EXTRA_DATA</span><span class="o">);</span>
                    <span class="k">break</span><span class="o">;</span>
                <span class="k">case</span> <span class="nl">HR_FILTER:</span>
                    <span class="n">String</span> <span class="n">hrValue</span> <span class="o">=</span> <span class="n">intent</span><span class="o">.</span><span class="na">getStringExtra</span><span class="o">(</span><span class="n">EXTRA_DATA</span><span class="o">);</span>
                    <span class="k">break</span><span class="o">;</span>
                <span class="k">case</span> <span class="nl">GSR_FILTER:</span>
                    <span class="n">String</span> <span class="n">gsrValue</span> <span class="o">=</span> <span class="n">intent</span><span class="o">.</span><span class="na">getStringExtra</span><span class="o">(</span><span class="n">EXTRA_DATA</span><span class="o">);</span>
                    <span class="k">break</span><span class="o">;</span>
                <span class="k">case</span> <span class="nl">API_RESPONSE:</span>
                    <span class="n">String</span> <span class="n">apiResponse</span> <span class="o">=</span> <span class="n">intent</span><span class="o">.</span><span class="na">getStringExtra</span><span class="o">(</span><span class="n">EXTRA_DATA</span><span class="o">);</span>
                    <span class="k">break</span><span class="o">;</span>
                <span class="k">case</span> <span class="nl">TOAST_MESSAGE:</span>
                    <span class="n">String</span> <span class="n">toastMessage</span> <span class="o">=</span> <span class="n">intent</span><span class="o">.</span><span class="na">getStringExtra</span><span class="o">(</span><span class="n">EXTRA_DATA</span><span class="o">);</span>
                    <span class="k">break</span><span class="o">;</span>
                <span class="k">case</span> <span class="nl">EMOJI_SENTIMENT_FILTER:</span>
                    <span class="n">Bundle</span> <span class="n">emojiSentimentBundle</span> <span class="o">=</span> <span class="n">intent</span><span class="o">.</span><span class="na">getBundleExtra</span><span class="o">(</span><span class="n">EXTRA_DATA</span><span class="o">);</span>
                    <span class="k">break</span><span class="o">;</span>
                <span class="k">case</span> <span class="nl">TEXT_SENTIMENT_FILTER:</span>
                    <span class="n">Bundle</span> <span class="n">textSentimentBundle</span> <span class="o">=</span> <span class="n">intent</span><span class="o">.</span><span class="na">getBundleExtra</span><span class="o">(</span><span class="n">EXTRA_DATA</span><span class="o">);</span>
                    <span class="k">break</span><span class="o">;</span>
                <span class="k">case</span> <span class="nl">CONNECTED_DEVICES_FILTER:</span>
                    <span class="n">String</span> <span class="n">btDeviceName</span> <span class="o">=</span> <span class="n">intent</span><span class="o">.</span><span class="na">getStringExtra</span><span class="o">(</span><span class="n">ServiceConstants</span><span class="o">.</span><span class="na">BLUETOOTH_DEVICE_NAME</span><span class="o">);</span>
                    <span class="k">break</span><span class="o">;</span>
                <span class="k">case</span> <span class="nl">BLE_DEVICE_FILTER:</span>
                    <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">BluetoothDevice</span><span class="o">&gt;</span> <span class="n">bledeviceList</span> <span class="o">=</span> <span class="n">intent</span><span class="o">.</span><span class="na">getParcelableArrayListExtra</span>
                            <span class="o">(</span><span class="n">EXTRA_DATA</span><span class="o">);</span>
                    <span class="k">for</span> <span class="o">(</span><span class="n">BluetoothDevice</span> <span class="nl">bleDevice:</span> <span class="n">bledeviceList</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">Log</span><span class="o">.</span><span class="na">d</span><span class="o">(</span><span class="s">"BleDevice"</span><span class="o">,</span> <span class="n">bleDevice</span><span class="o">.</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">" "</span> <span class="o">+</span> <span class="n">bleDevice</span><span class="o">.</span><span class="na">getAddress</span><span class="o">());</span>
                    <span class="o">}</span>
                    <span class="k">break</span><span class="o">;</span>
                <span class="k">case</span> <span class="nl">BLUETOOTH_DEVICE_FILTER:</span>
                    <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">BluetoothDevice</span><span class="o">&gt;</span> <span class="n">bluetoothDevices</span> <span class="o">=</span> <span class="n">intent</span><span class="o">.</span><span class="na">getParcelableArrayListExtra</span><span class="o">(</span><span class="n">EXTRA_DATA</span><span class="o">);</span>
                    <span class="k">for</span> <span class="o">(</span><span class="n">BluetoothDevice</span> <span class="n">bluetoothDevice</span> <span class="o">:</span> <span class="n">bluetoothDevices</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">Log</span><span class="o">.</span><span class="na">d</span><span class="o">(</span><span class="s">"BluetoothDevice"</span><span class="o">,</span> <span class="n">bluetoothDevice</span><span class="o">.</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">" "</span> <span class="o">+</span> <span class="n">bluetoothDevice</span>
                                <span class="o">.</span><span class="na">getAddress</span><span class="o">());</span>
                    <span class="o">}</span>
                    <span class="k">break</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">};</span>
</code></pre>
<p><code class="prettyprint">private BroadcastReceiver mMessageReceiver = new BroadcastReceiver()</code></p>

<p>Broadcast receiver with the list of registered filters.</p>

<h3 id="update-intentfilter-with-new-actions">Update IntentFilter with new Actions</h3>
<pre class="highlight java tab-java"><code>    <span class="kd">private</span> <span class="n">IntentFilter</span> <span class="nf">updateIntentFilter</span><span class="o">()</span> <span class="o">{</span>
        <span class="kd">final</span> <span class="n">IntentFilter</span> <span class="n">intentFilter</span> <span class="o">=</span> <span class="k">new</span> <span class="n">IntentFilter</span><span class="o">();</span>

        <span class="n">intentFilter</span><span class="o">.</span><span class="na">addAction</span><span class="o">(</span><span class="n">HELLO_FILTER</span><span class="o">);</span>
        <span class="n">intentFilter</span><span class="o">.</span><span class="na">addAction</span><span class="o">(</span><span class="n">GPS_FILTER</span><span class="o">);</span>
        <span class="n">intentFilter</span><span class="o">.</span><span class="na">addAction</span><span class="o">(</span><span class="n">ACC_FILTER</span><span class="o">);</span>
        <span class="n">intentFilter</span><span class="o">.</span><span class="na">addAction</span><span class="o">(</span><span class="n">HR_FILTER</span><span class="o">);</span>
        <span class="n">intentFilter</span><span class="o">.</span><span class="na">addAction</span><span class="o">(</span><span class="n">GSR_FILTER</span><span class="o">);</span>
        <span class="n">intentFilter</span><span class="o">.</span><span class="na">addAction</span><span class="o">(</span><span class="n">API_RESPONSE</span><span class="o">);</span>
        <span class="n">intentFilter</span><span class="o">.</span><span class="na">addAction</span><span class="o">(</span><span class="n">TOAST_MESSAGE</span><span class="o">);</span>
        <span class="n">intentFilter</span><span class="o">.</span><span class="na">addAction</span><span class="o">(</span><span class="n">HR_EVENT_FILTER</span><span class="o">);</span>
        <span class="n">intentFilter</span><span class="o">.</span><span class="na">addAction</span><span class="o">(</span><span class="n">AROUSAL_FILTER</span><span class="o">);</span>
        <span class="n">intentFilter</span><span class="o">.</span><span class="na">addAction</span><span class="o">(</span><span class="n">GSR_EVENT_FILTER</span><span class="o">);</span>
        <span class="n">intentFilter</span><span class="o">.</span><span class="na">addAction</span><span class="o">(</span><span class="n">EMOJI_SENTIMENT_FILTER</span><span class="o">);</span>
        <span class="n">intentFilter</span><span class="o">.</span><span class="na">addAction</span><span class="o">(</span><span class="n">TEXT_SENTIMENT_FILTER</span><span class="o">);</span>
        <span class="n">intentFilter</span><span class="o">.</span><span class="na">addAction</span><span class="o">(</span><span class="n">CONNECTED_DEVICES_FILTER</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">intentFilter</span><span class="o">;</span>
    <span class="o">}</span>
</code></pre>
<p><code class="prettyprint">private IntentFilter updateIntentFilter()</code></p>

<ul>
<li><strong>Returns:</strong> an intent filter with a list of actions.</li>
</ul>

<h3 id="start-biometric-data-capture">Start Biometric Data Capture</h3>
<pre class="highlight java tab-java"><code>    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">startCaptureSetUp</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">sendToService</span><span class="o">(</span><span class="n">getCaptureBundle</span><span class="o">(),</span> <span class="n">START_CAPTURE</span><span class="o">);</span>
    <span class="o">}</span>
</code></pre>
<p><code class="prettyprint">private void startCaptureSetUp()</code></p>

<p>Starts capturing of biometric/contextual data.</p>

<h3 id="get-capture-bundle">Get Capture Bundle</h3>
<pre class="highlight java tab-java"><code>    <span class="kd">private</span> <span class="n">Bundle</span> <span class="nf">getCaptureBundle</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">Bundle</span> <span class="n">bundle</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Bundle</span><span class="o">();</span>
        <span class="n">bundle</span><span class="o">.</span><span class="na">putBoolean</span><span class="o">(</span><span class="n">ACCELERATION_CAPTURE</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>
        <span class="n">bundle</span><span class="o">.</span><span class="na">putBoolean</span><span class="o">(</span><span class="n">HR_CAPTURE</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span> 
        <span class="n">bundle</span><span class="o">.</span><span class="na">putBoolean</span><span class="o">(</span><span class="n">GPS_CAPTURE</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span> 
        <span class="n">bundle</span><span class="o">.</span><span class="na">putBoolean</span><span class="o">(</span><span class="n">GSR_CAPTURE</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span> 
        <span class="n">bundle</span><span class="o">.</span><span class="na">putBoolean</span><span class="o">(</span><span class="n">INPUT_CAPTURE</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>
        <span class="n">bundle</span><span class="o">.</span><span class="na">putLong</span><span class="o">(</span><span class="n">DATA_RATE_SEND</span><span class="o">,</span> <span class="mi">20</span> <span class="o">*</span> <span class="mi">1000</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">bundle</span><span class="o">;</span>
    <span class="o">}</span>
</code></pre>
<p><code class="prettyprint">private Bundle getCaptureBundle()</code></p>

<p>Sets up the bundle data for capture using the service constants.</p>

<ul>
<li><strong>Returns:</strong> capture bundle</li>
</ul>

<h3 id="stop-biometric-data-capture">Stop Biometric Data Capture</h3>
<pre class="highlight java tab-java"><code>    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">stopCaptureSetUp</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">sendToService</span><span class="o">(</span><span class="n">getCaptureBundle</span><span class="o">(),</span> <span class="n">CANCEL_CAPTURE</span><span class="o">);</span>
    <span class="o">}</span>
</code></pre>
<p><code class="prettyprint">private void stopCaptureSetUp()</code></p>

<p>Stops capturing of biometric/contextual data.</p>

          <h1 id="tutorial-android-sdk">Tutorial - Android SDK</h1>

<h2 id="introduction">Introduction</h2>

<p>This tutorial is designed to assist Android Developers working with the <strong>SensumSDK</strong> and <strong>SensumAPI</strong>. </p>

<p>It is intended to provide a detailed guide to using the <strong>Sensum Emotion AI</strong> toolkit, providing code examples and guidelines for use.</p>

<p>Have fun and enjoy!</p>

<h2 id="requirements">Requirements</h2>

<ul>
<li>Android Studio 3.0 or newer for best compatibility.</li>
<li>Sensum SDK in the form of an .aar file.</li>
<li>Shimmer module in the form of an .aar file.</li>
</ul>

<h2 id="getting-started">Getting Started</h2>

<ul>
<li>Open Android Studio. Select <strong>Start a new Android Studio project</strong> as displayed in Figure 1.</li>
</ul>

<p><img src="images/figure1_android.png" title="Figure 1 - Start a new Android Studio project" alt="Figure 1 - Start a new Android Studio project" /></p>

<h4 id="figure-1-start-new-project"><p style="text-align: center;">Figure 1 - Start New Project</p></h4>

<p><br></p>

<ul>
<li>Provide a name for your project, for example: &lsquo;<em>SensumTutorialApplication</em>&rsquo;, then click <strong>Next</strong> (see Figure 2).</li>
</ul>

<p><img src="images/figure2_android.png" title="Figure 2 - Create New Project" alt="Figure 2 - Create New Project" /></p>

<h4 id="figure-2-create-new-project"><p style="text-align: center;">Figure 2 - Create New Project</p></h4>

<p><br></p>

<ul>
<li>Select the <strong>Phone and Tablet</strong> option from the <em>Target Android Devices</em> dialogue window.</li>
<li>We recommend you use API 23: Android 6.0 (Marshmallow) or greater for best performance (see Figure 3).</li>
</ul>

<p><img src="images/figure3_android.png" title="Figure 3 - Select Platforms" alt="Figure 3 - Select Platforms" /></p>

<h4 id="figure-3-select-platforms"><p style="text-align: center;">Figure 3 - Select Platforms</p></h4>

<p><br></p>

<ul>
<li>Click <strong>Next</strong> and select <strong>Empty Activity</strong> as shown in Figure 4.</li>
</ul>

<p><img src="images/figure4_android.png" title="Figure 4 - Add Activity" alt="Figure 4 - Add Activity" /></p>

<h4 id="figure-4-add-activity"><p style="text-align: center;">Figure 4 - Add Activity</p></h4>

<p><br></p>

<ul>
<li>Click <strong>Next</strong> in order to configure the <em>Empty Activity</em>, provide an appropriate title for the <em>Activity</em> (for example â€˜MainActivityâ€™, as shown in Figure 5).</li>
</ul>

<p><img src="images/figure5_android.png" title="Figure 5 - Customize the Activity" alt="Figure 5 - Customize the Activity" /></p>

<h4 id="figure-5-customize-the-activity"><p style="text-align: center;">Figure 5 - Customize the Activity</p></h4>

<p><br></p>

<h2 id="managing-module-dependencies">Managing Module Dependencies</h2>

<ul>
<li>From the <em>File</em> menu, navigate to <em>File</em> &gt; <em>New</em> &gt; <em>New Module</em> (Figure 6).</li>
</ul>

<p><img src="images/figure6_android.png" title=" Figure 6 - New Module" alt=" Figure 6 - New Module" /></p>

<h4 id="figure-6-creating-a-new-module"><p style="text-align: center;"> Figure 6 - Creating A New Module</p></h4>

<p><br></p>

<ul>
<li>The <em>New Module</em> dialogue window will appear.</li>
<li>Select the <strong>Import .JAR/.AAR Package</strong> option (Figure 7).</li>
<li>Click <strong>Next</strong>.</li>
</ul>

<p><img src="images/figure7_android.png" title=" Figure 7 - Import .JAR/.AAR Package" alt=" Figure 7 - Import .JAR/.AAR Package" /></p>

<h4 id="figure-7-import-jar-aar-package"><p style="text-align: center;"> Figure 7 - Import .JAR/.AAR Package</p></h4>

<p><br></p>

<ul>
<li>The <em>Create New Module</em> dialogue window will appear (shown in Figure 8).</li>
<li>In order to successfully create a new module, the developer must locate the necessary <strong>sdk-release.aar</strong> file on their system we provided.</li>
</ul>

<p><img src="images/figure8_android.png" title=" Figure 8 - Create New Module" alt=" Figure 8 - Create New Module" /></p>

<h4 id="figure-8-create-new-module"><p style="text-align: center;"> Figure 8 - Create New Module</p></h4>

<p><br></p>

<ul>
<li>Once the <strong>sdk-release</strong> file has been located, click <strong>Finish</strong>.</li>
<li>In order to link the <strong>sdk-release</strong> file to the project as a dependency, the developer must navigate to <em>File</em> &gt; <em>Project Structure</em>, from the <em>File</em> menu (Figure 9).</li>
</ul>

<p><img src="images/figure9_android.png" title="Figure 9 - Project Structure" alt="Figure 9 - Project Structure" /></p>

<h4 id="figure-9-project-structure"><p style="text-align: center;">Figure 9 - Project Structure</p></h4>

<p><br></p>

<ul>
<li>You will be presented with the <em>Project Structure</em> dialogue window.</li>
<li>At the left-hand-side of the dialogue, select <strong>mobile</strong> from the <em>Modules</em> section.</li>
<li>Click the <em>Dependencies</em> tab, then click the â€˜<strong>+</strong>â€™ button (top right-hand-side of dialogue), then select the third option: <strong>3 Module Dependency</strong> (Figure 10).</li>
</ul>

<p><img src="images/figure10_android.png" title="Figure 10 - Module Dependency" alt="Figure 10 - Module Dependency" /></p>

<h4 id="figure-10-module-dependency"><p style="text-align: center;">Figure 10 - Module Dependency</p></h4>

<p></br></p>

<ul>
<li>You will be presented with the <em>Choose Modules</em> dialogue window (Figure 11).</li>
</ul>

<p><img src="images/figure11_android.png" title="Figure 11 - Choose Modules" alt="Figure 11 - Choose Modules" /></p>

<h4 id="figure-11-choose-modules"><p style="text-align: center;">Figure 11 - Choose Modules</p></h4>

<p><br></p>

<ul>
<li>Select the <strong>sdk-release</strong>, and click <strong>OK</strong>.</li>
<li>You will return to the <em>Project Structure</em> dialogue window, once again, click <strong>OK</strong>.</li>
</ul>

<h2 id="implementing-the-shimmer-library-for-gsr-values">Implementing the Shimmer library for GSR values</h2>

<ul>
<li>To import the Shimmer library, repeat the process outlined for importing the <strong>sensumsdk-release</strong>, but instead locate the <strong>shimmersdk-release.aar</strong> file.</li>
</ul>

<h2 id="including-permissions">Including Permissions</h2>

<ul>
<li>A number of permissions are required to use the Sensum <strong>sdk-release</strong>, shown in Code Snippet 1.</li>
<li>Include these permissions within your manifest file (<em>AndroidManifest.xml</em>). Remember you will need to grant these permissions explicity.</li>
</ul>

<blockquote>
<p>Code Snippet 1</p>
</blockquote>
<pre class="highlight xml tab-xml"><code><span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">"android.permission.BLUETOOTH"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">"android.permission.BLUETOOTH_ADMIN"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">"android.permission.ACCESS_FINE_LOCATION"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">"android.permission.INTERNET"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">"android.permission.ACCESS_NETWORK_STATE"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">"android.permission.WRITE_EXTERNAL_STORAGE"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">"android.permission.READ_PHONE_STATE"</span><span class="nt">/&gt;</span>
</code></pre>
<h2 id="creating-a-service">Creating a Service</h2>

<ul>
<li>The <strong>SensumSDK</strong> runs in the background of the application. The developer is required to create a <em>ServiceConnection</em>, that is responsible for communication between the application front-end and the <strong>SensumSDK</strong>. In order to create this <em>ServiceConnection</em>, follow the steps outlined within Code Snippet 2.</li>
<li>The developer will need to create an instance of the <em>Messenger</em> object. This object has the ability to send <em>Message</em> objects to the <em>Service</em>.</li>
<li>Once the over-ridden <code class="prettyprint">onServiceConnected</code> method is called, the <code class="prettyprint">Messenger</code> object is initialised using the passed in <code class="prettyprint">IBinder</code> object.</li>
</ul>

<blockquote>
<p>Code Snippet 2</p>
</blockquote>
<pre class="highlight java tab-java"><code>    <span class="c1">// class fields</span>
    <span class="n">Messenger</span> <span class="n">mServiceMessenger</span><span class="o">;</span>
    <span class="n">SdkService</span> <span class="n">mService</span><span class="o">;</span>
    <span class="kt">boolean</span> <span class="n">mIsBound</span><span class="o">;</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="n">ServiceConnection</span> <span class="n">mConnection</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ServiceConnection</span><span class="o">()</span> <span class="o">{</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onServiceConnected</span><span class="o">(</span><span class="n">ComponentName</span> <span class="n">componentName</span><span class="o">,</span> <span class="n">IBinder</span> <span class="n">iBinder</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">SdkService</span><span class="o">.</span><span class="na">LocalBinder</span> <span class="n">binder</span> <span class="o">=</span> <span class="o">(</span><span class="n">SdkService</span><span class="o">.</span><span class="na">LocalBinder</span><span class="o">)</span> <span class="n">iBinder</span><span class="o">;</span>
            <span class="n">mService</span> <span class="o">=</span> <span class="n">binder</span><span class="o">.</span><span class="na">getService</span><span class="o">();</span>
            <span class="n">mServiceMessenger</span> <span class="o">=</span> <span class="n">mService</span><span class="o">.</span><span class="na">mServiceMessenger</span><span class="o">;</span>
            <span class="k">if</span> <span class="o">(!</span><span class="n">mIsBound</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">mIsBound</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>

        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onServiceDisconnected</span><span class="o">(</span><span class="n">ComponentName</span> <span class="n">componentName</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">// handle disconnect</span>
        <span class="o">}</span>
    <span class="o">};</span>
</code></pre>
<ul>
<li>Declare both the <em>Service</em> and the <em>BLE Service</em> in your manifest file (<em>AndroidManifest.xml</em>) as shown in Code Snippet 3 within the application tags.</li>
</ul>

<blockquote>
<p>Code Snippet 3</p>
</blockquote>
<pre class="highlight xml tab-xml"><code>        <span class="nt">&lt;service</span> <span class="na">android:name=</span><span class="s">"co.sensum.sensumservice.SDK.SdkService"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;service</span> <span class="na">android:name=</span><span class="s">"co.sensum.sensumservice.SDK.BLE.BluetoothLeService"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/application&gt;</span>
</code></pre>
<h2 id="binding-and-unbinding-the-service">Binding and Unbinding the Service</h2>

<ul>
<li>To bind the <em>Service</em> the developer will have to override the <code class="prettyprint">onStart</code> method and include the lines in Code Snippet 4.</li>
</ul>

<blockquote>
<p>Code Snippet 4</p>
</blockquote>
<pre class="highlight java tab-java"><code><span class="nd">@Override</span>
<span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onStart</span><span class="o">()</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">.</span><span class="na">onStart</span><span class="o">();</span>
    <span class="n">Intent</span> <span class="n">intent</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Intent</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">SdkService</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="n">bindService</span><span class="o">(</span><span class="n">intent</span><span class="o">,</span> <span class="n">mConnection</span><span class="o">,</span> <span class="n">Context</span><span class="o">.</span><span class="na">BIND_AUTO_CREATE</span><span class="o">);</span>
<span class="o">}</span>
</code></pre>
<ul>
<li>When the app is closed (destroyed) the <em>Service</em>  will need to be unbound otherwise it will continue running (see Code Snippet 5). A boolean variable named <code class="prettyprint">mIsBound</code> is initialised as <strong>true</strong>, once the <em>Service</em> is connected. When the <em>Service</em> is unbound, <code class="prettyprint">mIsBound</code> is set to <strong>false</strong>.</li>
</ul>

<blockquote>
<p>Code Snippet 5</p>
</blockquote>
<pre class="highlight java tab-java"><code><span class="nd">@Override</span>
<span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onDestroy</span><span class="o">()</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">.</span><span class="na">onDestroy</span><span class="o">();</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">mIsBound</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">unbindService</span><span class="o">(</span><span class="n">mConnection</span><span class="o">);</span>
        <span class="n">mIsBound</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre>
<h2 id="using-a-broadcast-receiver">Using a Broadcast Receiver</h2>

<ul>
<li>The <em>BroadcastReceiver</em> manages messages sent from the <strong>sdk-release</strong> within the front-end application. The <em>BroadcastReceiver</em> makes use of <em>Filters</em> that determine which events the application should listen for. The over-ridden method <code class="prettyprint">.onReceive</code> takes two arguments: <em>Context</em> and <em>Intent</em>. The <em>Intent</em> parameter has an associated action that specifies how the
<em>BroadcastReceiver</em> should behave.</li>
<li>Table 1 outlines the filters included in the <em>Service</em> and the <em>Intent Extras</em> they return.</li>
</ul>

<h3 id="table-1-broadcast-receiver-filters">Table 1: Broadcast Receiver Filters</h3>

<table><thead>
<tr>
<th>Action</th>
<th>Description</th>
<th>IntentExtras</th>
</tr>
</thead><tbody>
<tr>
<td><strong>BLE_DEVICE_FILTER</strong></td>
<td>Filters for BLE devices</td>
<td><code class="prettyprint">ArrayList&lt;BluetoothDevice&gt;</code></td>
</tr>
<tr>
<td><strong>HR_FILTER</strong></td>
<td>Filters for heart rate value</td>
<td><code class="prettyprint">String</code></td>
</tr>
<tr>
<td><strong>GPS_FILTER</strong></td>
<td>Filters for GPS values</td>
<td><code class="prettyprint">Bundle</code></td>
</tr>
<tr>
<td><strong>ACC_FILTER</strong></td>
<td>Filters for acceleration values</td>
<td><code class="prettyprint">Bundle</code></td>
</tr>
<tr>
<td><strong>DEVICE_DISCONNECTED</strong></td>
<td>Filters for a device disconnected value</td>
<td><code class="prettyprint">null</code></td>
</tr>
<tr>
<td><strong>API_RESPONSE</strong></td>
<td>Filters for responses from the <strong>SensumAPI</strong></td>
<td><code class="prettyprint">String</code></td>
</tr>
<tr>
<td><strong>TOAST_MESSAGE</strong></td>
<td>Filters for messages from the Service</td>
<td><code class="prettyprint">String</code></td>
</tr>
<tr>
<td><strong>BLE_CONNECTION_FILTER</strong></td>
<td>Filters for connection BLE messages</td>
<td><code class="prettyprint">String</code></td>
</tr>
<tr>
<td><strong>BLUETOOTH_CONNECTION_FILTER</strong></td>
<td>Filters for bluetooth connection messages</td>
<td><code class="prettyprint">String</code></td>
</tr>
<tr>
<td><strong>BLUETOOTH_DEVICE_FILTER</strong></td>
<td>Filters for bluetooth devices</td>
<td><code class="prettyprint">ArrayList&lt;BluetoothDevice&gt;</code></td>
</tr>
<tr>
<td><strong>GSR_FILTER</strong></td>
<td>Filters for GSR values</td>
<td><code class="prettyprint">String</code></td>
</tr>
<tr>
<td><strong>ACC_FAILED_REGISTERED</strong></td>
<td>Filters for acceleration failure from unsupported devices</td>
<td><code class="prettyprint">null</code></td>
</tr>
<tr>
<td><strong>HELLO_FILTER</strong></td>
<td>Filters for hello message</td>
<td><code class="prettyprint">String</code></td>
</tr>
<tr>
<td><strong>HR_EVENT_FILTER</strong></td>
<td>Filters for heart rate events from the <strong>SensumAPI</strong></td>
<td><code class="prettyprint">String</code></td>
</tr>
<tr>
<td><strong>AROUSAL_FILTER</strong></td>
<td>Filters for heart rate arousals from the <strong>SensumAPI</strong></td>
<td><code class="prettyprint">String</code></td>
</tr>
<tr>
<td><strong>GSR_EVENT_FILTER</strong></td>
<td>Filters for GSR events from the <strong>SensumAPI</strong></td>
<td><code class="prettyprint">String</code></td>
</tr>
<tr>
<td><strong>EMOJI_SENTIMENT_FILTER</strong></td>
<td>Filters for emoji sentiment from the <strong>SensumAPI</strong></td>
<td><code class="prettyprint">String</code></td>
</tr>
<tr>
<td><strong>TEXT_SENTIMENT_FILTER</strong></td>
<td>Filters for text sentiment from the <strong>SensumAPI</strong></td>
<td><code class="prettyprint">String</code></td>
</tr>
<tr>
<td><strong>CONNECTED_DEVICES_FILTER</strong></td>
<td>Filters for connected devices</td>
<td><code class="prettyprint">String</code></td>
</tr>
</tbody></table>

<h2 id="setting-up-the-broadcast-receiver">Setting up the Broadcast Receiver</h2>

<ul>
<li>Code Snippet 6 contains all necessary code that will allow you to setup a <em>BroadcastReceiver</em>.</li>
</ul>

<blockquote>
<p>Code Snippet 6</p>
</blockquote>
<pre class="highlight java tab-java"><code>    <span class="kd">private</span> <span class="n">BroadcastReceiver</span> <span class="n">mMessageReceiver</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BroadcastReceiver</span><span class="o">()</span> <span class="o">{</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onReceive</span><span class="o">(</span><span class="n">Context</span> <span class="n">context</span><span class="o">,</span> <span class="n">Intent</span> <span class="n">intent</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">String</span> <span class="n">action</span> <span class="o">=</span> <span class="n">intent</span><span class="o">.</span><span class="na">getAction</span><span class="o">();</span>
            <span class="k">switch</span> <span class="o">(</span><span class="n">action</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">case</span> <span class="nl">HELLO_FILTER:</span>
                    <span class="n">Toast</span><span class="o">.</span><span class="na">makeText</span><span class="o">(</span><span class="n">MainActivity</span><span class="o">.</span><span class="na">this</span><span class="o">,</span> <span class="n">intent</span><span class="o">.</span><span class="na">getStringExtra</span><span class="o">(</span><span class="n">EXTRA_DATA</span><span class="o">),</span> <span class="n">Toast</span><span class="o">.</span><span class="na">LENGTH_LONG</span><span class="o">).</span><span class="na">show</span><span class="o">();</span>
                    <span class="k">break</span><span class="o">;</span>
                <span class="k">case</span> <span class="nl">GPS_FILTER:</span>
                    <span class="n">Bundle</span> <span class="n">gpsBundle</span> <span class="o">=</span> <span class="n">intent</span><span class="o">.</span><span class="na">getBundleExtra</span><span class="o">(</span><span class="n">EXTRA_DATA</span><span class="o">);</span>
                    <span class="k">break</span><span class="o">;</span>
                <span class="k">case</span> <span class="nl">ACC_FILTER:</span>
                    <span class="n">Bundle</span> <span class="n">accBundle</span> <span class="o">=</span> <span class="n">intent</span><span class="o">.</span><span class="na">getBundleExtra</span><span class="o">(</span><span class="n">EXTRA_DATA</span><span class="o">);</span>
                    <span class="k">break</span><span class="o">;</span>
                <span class="k">case</span> <span class="nl">HR_FILTER:</span>
                    <span class="n">String</span> <span class="n">hrValue</span> <span class="o">=</span> <span class="n">intent</span><span class="o">.</span><span class="na">getStringExtra</span><span class="o">(</span><span class="n">EXTRA_DATA</span><span class="o">);</span>
                    <span class="k">break</span><span class="o">;</span>
                <span class="k">case</span> <span class="nl">GSR_FILTER:</span>
                    <span class="n">String</span> <span class="n">gsrValue</span> <span class="o">=</span> <span class="n">intent</span><span class="o">.</span><span class="na">getStringExtra</span><span class="o">(</span><span class="n">EXTRA_DATA</span><span class="o">);</span>
                    <span class="k">break</span><span class="o">;</span>
                <span class="k">case</span> <span class="nl">API_RESPONSE:</span>
                    <span class="n">String</span> <span class="n">apiResponse</span> <span class="o">=</span> <span class="n">intent</span><span class="o">.</span><span class="na">getStringExtra</span><span class="o">(</span><span class="n">EXTRA_DATA</span><span class="o">);</span>
                    <span class="k">break</span><span class="o">;</span>
                <span class="k">case</span> <span class="nl">TOAST_MESSAGE:</span>
                    <span class="n">String</span> <span class="n">toastMessage</span> <span class="o">=</span> <span class="n">intent</span><span class="o">.</span><span class="na">getStringExtra</span><span class="o">(</span><span class="n">EXTRA_DATA</span><span class="o">);</span>
                    <span class="k">break</span><span class="o">;</span>
                <span class="k">case</span> <span class="nl">EMOJI_SENTIMENT_FILTER:</span>
                    <span class="n">Bundle</span> <span class="n">emojiSentimentBundle</span> <span class="o">=</span> <span class="n">intent</span><span class="o">.</span><span class="na">getBundleExtra</span><span class="o">(</span><span class="n">EXTRA_DATA</span><span class="o">);</span>
                    <span class="k">break</span><span class="o">;</span>
                <span class="k">case</span> <span class="nl">TEXT_SENTIMENT_FILTER:</span>
                    <span class="n">Bundle</span> <span class="n">textSentimentBundle</span> <span class="o">=</span> <span class="n">intent</span><span class="o">.</span><span class="na">getBundleExtra</span><span class="o">(</span><span class="n">EXTRA_DATA</span><span class="o">);</span>
                    <span class="k">break</span><span class="o">;</span>
                <span class="k">case</span> <span class="nl">CONNECTED_DEVICES_FILTER:</span>
                    <span class="n">String</span> <span class="n">btDeviceName</span> <span class="o">=</span> <span class="n">intent</span><span class="o">.</span><span class="na">getStringExtra</span><span class="o">(</span><span class="n">ServiceConstants</span><span class="o">.</span><span class="na">BLUETOOTH_DEVICE_NAME</span><span class="o">);</span>
                    <span class="k">break</span><span class="o">;</span>
                <span class="k">case</span> <span class="nl">BLE_DEVICE_FILTER:</span>
                    <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">BluetoothDevice</span><span class="o">&gt;</span> <span class="n">bledeviceList</span> <span class="o">=</span> <span class="n">intent</span><span class="o">.</span><span class="na">getParcelableArrayListExtra</span>
                            <span class="o">(</span><span class="n">EXTRA_DATA</span><span class="o">);</span>
                    <span class="k">for</span> <span class="o">(</span><span class="n">BluetoothDevice</span> <span class="nl">bleDevice:</span> <span class="n">bledeviceList</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">Log</span><span class="o">.</span><span class="na">d</span><span class="o">(</span><span class="s">"BleDevice"</span><span class="o">,</span> <span class="n">bleDevice</span><span class="o">.</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">" "</span> <span class="o">+</span> <span class="n">bleDevice</span><span class="o">.</span><span class="na">getAddress</span><span class="o">());</span>
                    <span class="o">}</span>
                    <span class="k">break</span><span class="o">;</span>
                <span class="k">case</span> <span class="nl">BLUETOOTH_DEVICE_FILTER:</span>
                    <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">BluetoothDevice</span><span class="o">&gt;</span> <span class="n">bluetoothDevices</span> <span class="o">=</span> <span class="n">intent</span><span class="o">.</span><span class="na">getParcelableArrayListExtra</span><span class="o">(</span><span class="n">EXTRA_DATA</span><span class="o">);</span>
                    <span class="k">for</span> <span class="o">(</span><span class="n">BluetoothDevice</span> <span class="n">bluetoothDevice</span> <span class="o">:</span> <span class="n">bluetoothDevices</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">Log</span><span class="o">.</span><span class="na">d</span><span class="o">(</span><span class="s">"BluetoothDevice"</span><span class="o">,</span> <span class="n">bluetoothDevice</span><span class="o">.</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">" "</span> <span class="o">+</span> <span class="n">bluetoothDevice</span>
                                <span class="o">.</span><span class="na">getAddress</span><span class="o">());</span>
                    <span class="o">}</span>
                    <span class="k">break</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">};</span>
</code></pre>
<ul>
<li>The <em>BroadcastReceiver</em> must be registered in order to receive <em>Intents</em> from a <em>Service</em>. The <code class="prettyprint">registerReceiver</code> method, takes two arguments: <em>BroadcastReceiver</em> and <em>IntentFilter</em>. We have included our own method that returns an <em>IntentFilter:</em> <code class="prettyprint">getUpdateIntentFilter</code> (this method is displayed within Code Snippet 8).</li>
<li>This method should be called immediately on starting the application or activity, therefore it is placed within the <code class="prettyprint">.onResume</code> method, as shown in Code Snippet 7.</li>
</ul>

<blockquote>
<p>Code Snippet 7</p>
</blockquote>
<pre class="highlight java tab-java"><code> <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onResume</span><span class="o">()</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">.</span><span class="na">onResume</span><span class="o">();</span>
        <span class="n">registerReceiver</span><span class="o">(</span><span class="n">mMessageReceiver</span><span class="o">,</span> <span class="n">getUpdateIntentFilter</span><span class="o">());</span>
    <span class="o">}</span>
</code></pre>
<blockquote>
<p>Code Snippet 8</p>
</blockquote>
<pre class="highlight java tab-java"><code>  <span class="kd">private</span> <span class="n">IntentFilter</span> <span class="nf">getUpdateIntentFilter</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">IntentFilter</span> <span class="n">filter</span> <span class="o">=</span> <span class="k">new</span> <span class="n">IntentFilter</span><span class="o">();</span>
        <span class="n">filter</span><span class="o">.</span><span class="na">addAction</span><span class="o">(</span><span class="n">HELLO_FILTER</span><span class="o">);</span>
        <span class="n">filter</span><span class="o">.</span><span class="na">addAction</span><span class="o">(</span><span class="n">GPS_FILTER</span><span class="o">);</span>
        <span class="n">filter</span><span class="o">.</span><span class="na">addAction</span><span class="o">(</span><span class="n">ACC_FILTER</span><span class="o">);</span>
        <span class="n">filter</span><span class="o">.</span><span class="na">addAction</span><span class="o">(</span><span class="n">HR_FILTER</span><span class="o">);</span>
        <span class="n">filter</span><span class="o">.</span><span class="na">addAction</span><span class="o">(</span><span class="n">GSR_FILTER</span><span class="o">);</span>
        <span class="n">filter</span><span class="o">.</span><span class="na">addAction</span><span class="o">(</span><span class="n">API_RESPONSE</span><span class="o">);</span>
        <span class="n">filter</span><span class="o">.</span><span class="na">addAction</span><span class="o">(</span><span class="n">TOAST_MESSAGE</span><span class="o">);</span>
        <span class="n">filter</span><span class="o">.</span><span class="na">addAction</span><span class="o">(</span><span class="n">HR_EVENT_FILTER</span><span class="o">);</span>
        <span class="n">filter</span><span class="o">.</span><span class="na">addAction</span><span class="o">(</span><span class="n">AROUSAL_FILTER</span><span class="o">);</span>
        <span class="n">filter</span><span class="o">.</span><span class="na">addAction</span><span class="o">(</span><span class="n">GSR_EVENT_FILTER</span><span class="o">);</span>
        <span class="n">filter</span><span class="o">.</span><span class="na">addAction</span><span class="o">(</span><span class="n">EMOJI_SENTIMENT_FILTER</span><span class="o">);</span>
        <span class="n">filter</span><span class="o">.</span><span class="na">addAction</span><span class="o">(</span><span class="n">TEXT_SENTIMENT_FILTER</span><span class="o">);</span>
        <span class="n">filter</span><span class="o">.</span><span class="na">addAction</span><span class="o">(</span><span class="n">CONNECTED_DEVICES_FILTER</span><span class="o">);</span>
        <span class="n">filter</span><span class="o">.</span><span class="na">addAction</span><span class="o">(</span><span class="n">BLE_DEVICE_FILTER</span><span class="o">);</span>
        <span class="n">filter</span><span class="o">.</span><span class="na">addAction</span><span class="o">(</span><span class="n">BLE_CONNECTION_FILTER</span><span class="o">);</span>
        <span class="n">filter</span><span class="o">.</span><span class="na">addAction</span><span class="o">(</span><span class="n">BLUETOOTH_DEVICE_FILTER</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">filter</span><span class="o">;</span>
    <span class="o">}</span>
</code></pre>
<ul>
<li>When the application is destroyed (on application close/force-close), the <em>BroadcastReceiver</em> must be unregistered. This is handled via the <code class="prettyprint">.onDestroy</code> method. Code Snippet 9 demonstrates how to achieve this and can be added to the activity.</li>
</ul>

<blockquote>
<p>Code Snippet 9</p>
</blockquote>
<pre class="highlight java tab-java"><code>    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onDestroy</span><span class="o">()</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">.</span><span class="na">onDestroy</span><span class="o">();</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">mIsBound</span><span class="o">){</span>
            <span class="n">unbindService</span><span class="o">(</span><span class="n">mConnection</span><span class="o">);</span>
            <span class="n">mIsBound</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
            <span class="n">unregisterReceiver</span><span class="o">(</span><span class="n">mMessageReceiver</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
</code></pre>
<h2 id="communicating-with-the-service">Communicating with the Service</h2>

<ul>
<li>The applicationâ€™s communication with the <em>Service</em> requires that commands be sent via <em>Message</em> objects. The <em>Message</em> object contains a property called <code class="prettyprint">arg1</code> (which is an Integer value). This Integer value represents one of the possible options listed in the Constants column of Table 2.</li>
<li>This property (<code class="prettyprint">arg1</code>) will carry the command you want to request from the <em>Service</em>.</li>
</ul>

<h3 id="table-2-send-to-service-commands">Table 2: Send to Service Commands</h3>

<table><thead>
<tr>
<th>Constants (of type &lsquo;Int&rsquo;)</th>
<th>Required Bundle Data</th>
</tr>
</thead><tbody>
<tr>
<td><strong>CONNECT_BLE</strong></td>
<td><code class="prettyprint">String DEVICE_NAME</code>, <br> <code class="prettyprint">String DEVICE_ADDRESS</code></td>
</tr>
<tr>
<td><strong>BLE_SCAN</strong></td>
<td><code class="prettyprint">null</code></td>
</tr>
<tr>
<td><strong>START_CAPTURE</strong></td>
<td><code class="prettyprint">boolean ACCELERATION_CAPTURE</code>,<br> <code class="prettyprint">boolean HR_CAPTURE</code>,<br> <code class="prettyprint">boolean GPS_CAPTURE</code>,<br> <code class="prettyprint">boolean GSR_CAPTURE</code>,<br> <code class="prettyprint">boolean INPUT_CAPTURE</code>,<br> <code class="prettyprint">int DATA_RATE_SEND</code></td>
</tr>
<tr>
<td><strong>CANCEL_CAPTURE</strong></td>
<td><code class="prettyprint">boolean ACCELERATION_CAPTURE</code>,<br> <code class="prettyprint">boolean HR_CAPTURE</code>, <br> <code class="prettyprint">boolean GPS_CAPTURE</code>,<br> <code class="prettyprint">boolean GSR_CAPTURE</code>,<br> <code class="prettyprint">boolean INPUT_CAPTURE</code></td>
</tr>
<tr>
<td><strong>GOOGLE_LOGIN</strong></td>
<td><code class="prettyprint">String API_BASEURL</code>,<br> <code class="prettyprint">String API_KEY</code>,<br> <code class="prettyprint">String IDENTITY_POOL_ID</code>,<br> <code class="prettyprint">String GOOGLE_ID_TOKEN</code>,<br> <code class="prettyprint">String GOOGLE_WEB_CLIENT_ID</code></td>
</tr>
<tr>
<td><strong>BLUETOOTH_SCAN</strong></td>
<td><code class="prettyprint">null</code></td>
</tr>
<tr>
<td><strong>CONNECT_BLUETOOTH_DEVICE</strong></td>
<td><code class="prettyprint">String DEVICE_NAME</code>,<br> <code class="prettyprint">String DEVICE_ADDRESS</code></td>
</tr>
<tr>
<td><strong>HELLO</strong></td>
<td><code class="prettyprint">null</code></td>
</tr>
<tr>
<td><strong>INPUT_SENTIMENT_TEXT</strong></td>
<td><code class="prettyprint">String TEXT_MESSAGE</code></td>
</tr>
<tr>
<td><strong>DISCONNECT_BLE</strong></td>
<td><code class="prettyprint">null</code></td>
</tr>
<tr>
<td><strong>DISCONNECT_BLUETOOTH</strong></td>
<td><code class="prettyprint">null</code></td>
</tr>
<tr>
<td><strong>CONNECTED_DEVICES</strong></td>
<td><code class="prettyprint">null</code></td>
</tr>
</tbody></table>

<ul>
<li>This <em>Message</em> object also has the capacity to transmit data in the form of a <em>Bundle</em>. A <em>Bundle</em> contains associated data that can be interpreted by the <em>Service</em>. Table 2 indicates the relationship between selected Constants, and the requirements for a <em>Bundle</em> of a particular type. </li>
<li>For example: if using the <strong>CONNECT_BLE</strong> constant, then the associated <em>Bundle</em> should contain two Strings, one for <strong>DEVICE_NAME</strong>, the other for <strong>DEVICE_ADDRESS</strong>.</li>
<li>Code Snippet 10 illustrates how to construct a <em>Message</em> object, and how to send it on to the <em>Service</em>. The <em>Messenger</em> object, <code class="prettyprint">mServiceMessenger</code>, is able to execute its associated <code class="prettyprint">.send</code> method. This sends the constructed <em>Message</em> object to the <em>Service</em>.</li>
</ul>

<blockquote>
<p>Code Snippet 10</p>
</blockquote>
<pre class="highlight java tab-java"><code>   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">sendToService</span><span class="o">(</span><span class="n">Bundle</span> <span class="n">bundle</span><span class="o">,</span> <span class="kt">int</span> <span class="n">argValue</span><span class="o">){</span>
        <span class="n">Message</span> <span class="n">message</span> <span class="o">=</span> <span class="n">Message</span><span class="o">.</span><span class="na">obtain</span><span class="o">();</span>
        <span class="n">message</span><span class="o">.</span><span class="na">arg1</span> <span class="o">=</span> <span class="n">argValue</span><span class="o">;</span>
        <span class="n">message</span><span class="o">.</span><span class="na">setData</span><span class="o">(</span><span class="n">bundle</span><span class="o">);</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="n">mServiceMessenger</span><span class="o">.</span><span class="na">send</span><span class="o">(</span><span class="n">message</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">RemoteException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>
</code></pre>
<h2 id="interacting-with-the-service">Interacting with the Service</h2>

<ul>
<li>To use the service, the developer create a <em>Button</em> that will be able to send a <em>Message</em> to the <em>Service</em>. Within the <code class="prettyprint">onClickListener</code> make a call to the <code class="prettyprint">sendToService</code> method.</li>
<li>Enter <strong>null</strong> as the first parameter (<em>Bundle</em>) and <strong>HELLO</strong> as the second parameter (<em>Int</em>). This will send this <em>Message</em> to the <em>Service</em>. The <em>Service</em> will receive this <em>Message</em> and send a <em>Broadcast</em>, which the <em>BroadcastReceiver</em> will listen for.</li>
<li>The <em>BroadcastReceiver</em> will handle the <em>action</em> and in this case the <em>action</em> will fall under the <strong>HELLO_FILTER</strong> case. It is up to the developer what they wish to do with the returned <em>String</em>.</li>
</ul>

<blockquote>
<p>Code Snippet 11</p>
</blockquote>
<pre class="highlight java tab-java"><code>  <span class="kd">private</span> <span class="n">BroadcastReceiver</span> <span class="n">mMessageReceiver</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BroadcastReceiver</span><span class="o">()</span> <span class="o">{</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onReceive</span><span class="o">(</span><span class="n">Context</span> <span class="n">context</span><span class="o">,</span> <span class="n">Intent</span> <span class="n">intent</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">String</span> <span class="n">action</span> <span class="o">=</span> <span class="n">intent</span><span class="o">.</span><span class="na">getAction</span><span class="o">();</span>
            <span class="k">switch</span> <span class="o">(</span><span class="n">action</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">case</span> <span class="nl">HELLO_FILTER:</span>
                    <span class="n">Toast</span><span class="o">.</span><span class="na">makeText</span><span class="o">(</span><span class="n">MainActivity</span><span class="o">.</span><span class="na">this</span><span class="o">,</span> <span class="n">intent</span><span class="o">.</span><span class="na">getStringExtra</span><span class="o">(</span><span class="n">EXTRA_DATA</span><span class="o">),</span> <span class="n">Toast</span><span class="o">.</span><span class="na">LENGTH_LONG</span><span class="o">).</span><span class="na">show</span><span class="o">();</span>
                    <span class="k">break</span><span class="o">;</span>
                <span class="k">case</span> <span class="nl">GPS_FILTER:</span>
                    <span class="n">Bundle</span> <span class="n">gpsBundle</span> <span class="o">=</span> <span class="n">intent</span><span class="o">.</span><span class="na">getBundleExtra</span><span class="o">(</span><span class="n">EXTRA_DATA</span><span class="o">);</span>
                    <span class="k">break</span><span class="o">;</span>
                <span class="k">case</span> <span class="nl">ACC_FILTER:</span>
                    <span class="n">Bundle</span> <span class="n">accBundle</span> <span class="o">=</span> <span class="n">intent</span><span class="o">.</span><span class="na">getBundleExtra</span><span class="o">(</span><span class="n">EXTRA_DATA</span><span class="o">);</span>
                    <span class="k">break</span><span class="o">;</span>
                <span class="k">case</span> <span class="nl">HR_FILTER:</span>
                    <span class="n">String</span> <span class="n">hrValue</span> <span class="o">=</span> <span class="n">intent</span><span class="o">.</span><span class="na">getStringExtra</span><span class="o">(</span><span class="n">EXTRA_DATA</span><span class="o">);</span>
                    <span class="k">break</span><span class="o">;</span>
                <span class="k">case</span> <span class="nl">GSR_FILTER:</span>
                    <span class="n">String</span> <span class="n">gsrValue</span> <span class="o">=</span> <span class="n">intent</span><span class="o">.</span><span class="na">getStringExtra</span><span class="o">(</span><span class="n">EXTRA_DATA</span><span class="o">);</span>
                    <span class="k">break</span><span class="o">;</span>
                <span class="k">case</span> <span class="nl">API_RESPONSE:</span>
                    <span class="n">String</span> <span class="n">apiResponse</span> <span class="o">=</span> <span class="n">intent</span><span class="o">.</span><span class="na">getStringExtra</span><span class="o">(</span><span class="n">EXTRA_DATA</span><span class="o">);</span>
                    <span class="k">break</span><span class="o">;</span>
                <span class="k">case</span> <span class="nl">TOAST_MESSAGE:</span>
                    <span class="n">String</span> <span class="n">toastMessage</span> <span class="o">=</span> <span class="n">intent</span><span class="o">.</span><span class="na">getStringExtra</span><span class="o">(</span><span class="n">EXTRA_DATA</span><span class="o">);</span>
                    <span class="k">break</span><span class="o">;</span>
                <span class="k">case</span> <span class="nl">EMOJI_SENTIMENT_FILTER:</span>
                    <span class="n">Bundle</span> <span class="n">emojiSentimentBundle</span> <span class="o">=</span> <span class="n">intent</span><span class="o">.</span><span class="na">getBundleExtra</span><span class="o">(</span><span class="n">EXTRA_DATA</span><span class="o">);</span>
                    <span class="k">break</span><span class="o">;</span>
                <span class="k">case</span> <span class="nl">TEXT_SENTIMENT_FILTER:</span>
                    <span class="n">Bundle</span> <span class="n">textSentimentBundle</span> <span class="o">=</span> <span class="n">intent</span><span class="o">.</span><span class="na">getBundleExtra</span><span class="o">(</span><span class="n">EXTRA_DATA</span><span class="o">);</span>
                    <span class="k">break</span><span class="o">;</span>
                <span class="k">case</span> <span class="nl">CONNECTED_DEVICES_FILTER:</span>
                    <span class="n">String</span> <span class="n">btDeviceName</span> <span class="o">=</span> <span class="n">intent</span><span class="o">.</span><span class="na">getStringExtra</span><span class="o">(</span><span class="n">ServiceConstants</span><span class="o">.</span><span class="na">BLUETOOTH_DEVICE_NAME</span><span class="o">);</span>
                    <span class="k">break</span><span class="o">;</span>
                <span class="k">case</span> <span class="nl">BLE_DEVICE_FILTER:</span>
                    <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">BluetoothDevice</span><span class="o">&gt;</span> <span class="n">bledeviceList</span> <span class="o">=</span> <span class="n">intent</span><span class="o">.</span><span class="na">getParcelableArrayListExtra</span>
                            <span class="o">(</span><span class="n">EXTRA_DATA</span><span class="o">);</span>
                    <span class="n">Log</span><span class="o">.</span><span class="na">d</span><span class="o">(</span><span class="n">TAG</span><span class="o">,</span> <span class="s">"onReceive: "</span> <span class="o">+</span> <span class="n">bledeviceList</span><span class="o">.</span><span class="na">size</span><span class="o">());</span>
                    <span class="k">for</span> <span class="o">(</span><span class="n">BluetoothDevice</span> <span class="nl">bleDevice:</span> <span class="n">bledeviceList</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">Log</span><span class="o">.</span><span class="na">d</span><span class="o">(</span><span class="s">"BleDevice"</span><span class="o">,</span> <span class="n">bleDevice</span><span class="o">.</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">" "</span> <span class="o">+</span> <span class="n">bleDevice</span><span class="o">.</span><span class="na">getAddress</span><span class="o">());</span>
                    <span class="o">}</span>
                    <span class="k">break</span><span class="o">;</span>
               <span class="k">case</span> <span class="nl">BLUETOOTH_DEVICE_FILTER:</span>
                    <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">BluetoothDevice</span><span class="o">&gt;</span> <span class="n">bluetoothDevices</span> <span class="o">=</span> <span class="n">intent</span><span class="o">.</span><span class="na">getParcelableArrayListExtra</span><span class="o">(</span><span class="n">EXTRA_DATA</span><span class="o">);</span>
                    <span class="k">for</span> <span class="o">(</span><span class="n">BluetoothDevice</span> <span class="n">bluetoothDevice</span> <span class="o">:</span> <span class="n">bluetoothDevices</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">Log</span><span class="o">.</span><span class="na">d</span><span class="o">(</span><span class="s">"BluetoothDevice"</span><span class="o">,</span> <span class="n">bluetoothDevice</span><span class="o">.</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">" "</span> <span class="o">+</span> <span class="n">bluetoothDevice</span>
                                <span class="o">.</span><span class="na">getAddress</span><span class="o">());</span>
                    <span class="o">}</span>
                    <span class="k">break</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">};</span>
</code></pre>
<ul>
<li>Set up a button in your front-end activity/fragment. Inside the <code class="prettyprint">onClickListener</code> include the lines shown in Code Snippet 12.</li>
</ul>

<blockquote>
<p>Code Snippet 12</p>
</blockquote>
<pre class="highlight java tab-java"><code><span class="n">Button</span> <span class="n">button</span> <span class="o">=</span> <span class="o">(</span><span class="n">Button</span><span class="o">)</span> <span class="n">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">hello_button</span><span class="o">);</span>
<span class="n">button</span><span class="o">.</span><span class="na">setOnClickListener</span><span class="o">(</span><span class="k">new</span> <span class="n">View</span><span class="o">.</span><span class="na">OnClickListener</span><span class="o">()</span> <span class="o">{</span>
   <span class="nd">@Override</span>
   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onClick</span><span class="o">(</span><span class="n">View</span> <span class="n">view</span><span class="o">)</span> <span class="o">{</span>
       <span class="n">sendToService</span><span class="o">(</span><span class="kc">null</span><span class="o">,</span> <span class="n">HELLO</span><span class="o">);</span>
   <span class="o">}</span>
<span class="o">});</span>
</code></pre>
<ul>
<li>In the <em>BroadcastReceiver</em> listen for the constant <strong>HELLO_FILTER</strong> (ensure that you are filtering for this in the call to register the receiver).</li>
</ul>

<h2 id="setting-up-ble">Setting up BLE</h2>

<ul>
<li>To scan for Bluetooth Low Energy (BLE) devices, the developer can create a <em>Button</em> object that will tell the <em>Service</em> to start scanning.</li>
<li>As in the <a href ="#interacting-with-the-service"><strong>Interacting with the Service</strong></a> section, the developer should execute the <code class="prettyprint">sendToService</code> method within the <em>Buttonâ€™s</em> <code class="prettyprint">onClickListener</code> (refer to Table 2).</li>
<li>The first parameter that the <code class="prettyprint">sendToService</code> method expects in this instance is <code class="prettyprint">null</code>, as there is no extra data that the Service needs to execute this task. The second parameter that it takes is <strong>BLE_SCAN</strong> (Code Snippet 13).</li>
</ul>

<blockquote>
<p>Code Snippet 13</p>
</blockquote>
<pre class="highlight java tab-java"><code><span class="n">Button</span> <span class="n">button</span> <span class="o">=</span> <span class="o">(</span><span class="n">Button</span><span class="o">)</span> <span class="n">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">scanButton</span><span class="o">);</span>
<span class="n">button</span><span class="o">.</span><span class="na">setOnClickListener</span><span class="o">(</span><span class="k">new</span> <span class="n">View</span><span class="o">.</span><span class="na">OnClickListener</span><span class="o">()</span> <span class="o">{</span>
   <span class="nd">@Override</span>
   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onClick</span><span class="o">(</span><span class="n">View</span> <span class="n">view</span><span class="o">)</span> <span class="o">{</span>
       <span class="n">sendToService</span><span class="o">(</span><span class="kc">null</span><span class="o">,</span> <span class="n">BLE_SCAN</span><span class="o">);</span>
   <span class="o">}</span>
<span class="o">});</span>
</code></pre>
<h2 id="receiving-ble-devices">Receiving BLE Devices</h2>

<ul>
<li>To receive devices from the <em>Service</em> the developer will have to set up the <em>BroadcastReceiver</em> to listen for the <strong>BLE_DEVICE_FILTER</strong> constant.</li>
<li>Table 1 displays the data that the <em>Intent</em> received by the <em>BroadcastReceiver</em> carries. In this case the data that is received is an <em>ArrayList</em> of <em>BluetoothDevices</em>.</li>
<li>It is then up to the developer as to how they wish to display these devices. In our implementations we take the arraylist of devices sent back as shown in the <code class="prettyprint">case BLE_DEVICE_FILTER</code> output and assign that to a recycler view for display. We then use an onClick for each viewholder to pass the name and address to the service for connection.</li>
</ul>

<h2 id="connecting-a-ble-device">Connecting a BLE Device</h2>

<ul>
<li>To connect a BLE device the developer will need to send two <em>String</em> objects as part of the <em>Bundle</em> object that will be sent to the <em>Service</em> as part of the <code class="prettyprint">sendToService</code> method (Code Snippet 14).</li>
<li>According to Table 2, the two Strings required are the BLE device&rsquo;s name and address. These are necessary in order to create a connection between the Android device and the BLE device.</li>
<li>The developer should include the <strong>BLE_CONNECTION_FILTER</strong> constant within the <em>BroadcastReceiverâ€™s</em> overridden <code class="prettyprint">onReceive</code> method.</li>
<li>According to Table 1, the data received is of type <em>String</em>. This <em>String</em> provides a connection message, sent back from the <em>Service</em>, to notify the user whether the connection was successful or not. The <code class="prettyprint">case HR_FILTER:</code> output will now update.</li>
</ul>

<blockquote>
<p>Code Snippet 14</p>
</blockquote>
<pre class="highlight java tab-java"><code><span class="n">Bundle</span> <span class="n">bundle</span> <span class="o">=</span>  <span class="k">new</span> <span class="n">Bundle</span><span class="o">();</span>
<span class="n">bundle</span><span class="o">.</span><span class="na">putString</span><span class="o">(</span><span class="n">DEVICE_NAME</span><span class="o">,</span> <span class="n">deviceName</span><span class="o">);</span>
<span class="n">bundle</span><span class="o">.</span><span class="na">putString</span><span class="o">(</span><span class="n">DEVICE_ADDRESS</span><span class="o">,</span> <span class="n">deviceAddress</span><span class="o">);</span>
<span class="n">sendToService</span><span class="o">(</span><span class="n">bundle</span><span class="o">,</span> <span class="n">CONNECT_BLE</span><span class="o">);</span>
</code></pre>
<ul>
<li><strong>SensumSDK</strong> supports connecting to BLE devices for reading heart rate measurements. For a list of tested compatible devices please contact us - hello@sensum.co</li>
</ul>

<h2 id="receiving-values">Receiving Values</h2>

<ul>
<li>This version of the <strong>SensumSDK</strong> only returns heart rate values from the BLE device, therefore the developer should ensure that the BLE device that they are using can detect heart rate.</li>
<li>On connection the BLE device will send values to the <em>Service</em>. The <em>Service</em> will then broadcast these values to the application that the developer has built. The developer should include the <strong>HR_FILTER</strong> constant within the <em>BroadcastReceiverâ€™s</em> <code class="prettyprint">onReceive</code> method.</li>
<li>According to Table 1, the value received will be of type <em>String</em>. This value will be the heart rate.</li>
</ul>

<h2 id="setting-up-bluetooth">Setting up Bluetooth</h2>

<ul>
<li>To scan for, receive and read values from Bluetooth devices, please follow the steps previously outlined within the <a href = "#setting-up-the-ble">Setting up BLE</a> section of this tutorial.</li>
<li>The same steps should be taken, however bear in mind that the constants should change i.e. replace BLE_SCAN with <strong>BLUETOOTH_SCAN</strong> and BLE_DEVICE_FILTER with <strong>BLUETOOTH_DEVICE_FILTER</strong>.</li>
<li>This version of the <strong>SensumSDK</strong> will connect to a <em>Shimmer 2r</em> &amp; <em>Shimmer 3</em> device. The Shimmer devices both return GSR and the developer should include the <strong>GSR_FILTER</strong> constant within the <em>BroadcastReceiverâ€™s</em> <code class="prettyprint">onReceive</code> method.</li>
<li>According to Table 1 the value received will be of type <em>String</em>. This value will be the GSR value.</li>
</ul>

<h2 id="receiving-gps-and-acceleration-values">Receiving GPS and Acceleration Values</h2>

<ul>
<li>GPS and Acceleration values will automatically be sent from the <em>Service</em> to the applicationâ€™s frontend once the user has started the application and is authenticated (see <a href = "#google-sign-in">Google Sign-In Section</a>). The developer should include the <strong>GPS_FILTER</strong> and the <strong>ACC_FILTER</strong> constants within the <em>BroadcastReceiverâ€™s</em> <code class="prettyprint">onReceive</code> method.</li>
<li>Both of these filters receive a bundle that contains multiple value types. Refer to Table 3 to discover the value types returned from the <em>Service</em>.</li>
</ul>

<h3 id="table-3-broadcast-receiver-filter-examples">Table 3: Broadcast Receiver Filter Examples</h3>

<table><thead>
<tr>
<th>Filter</th>
<th>Bundle</th>
<th>Constants</th>
<th>Example Method Call</th>
</tr>
</thead><tbody>
<tr>
<td><strong>GPS Filter</strong></td>
<td>Float speed</td>
<td>SPEED_VALUE</td>
<td>gpsBundle.getFloat(SPEED_VALUE)</td>
</tr>
<tr>
<td></td>
<td>Double latitude</td>
<td>LATITUDE_VALUE</td>
<td>gpsBundle.getFloat(LATITUDE_VALUE)</td>
</tr>
<tr>
<td></td>
<td>Double longitude</td>
<td>LONGITUDE_VALUE</td>
<td>gpsBundle.getFloat(LONGITUDE_VALUE)</td>
</tr>
<tr>
<td></td>
<td>Double altitude</td>
<td>ALTITUDE_VALUE</td>
<td>gpsBundle.getFloat(ALTITUDE_VALUE)</td>
</tr>
<tr>
<td></td>
<td>Float bearing</td>
<td>BEARING_VALUE</td>
<td>gpsBundle.getFloat(BEARING_VALUE)</td>
</tr>
<tr>
<td></td>
<td>Float accuracy</td>
<td>ACCURACY_VALUE</td>
<td>gpsBundle.getFloat(ACCURACY_VALUE)</td>
</tr>
<tr>
<td><strong>ACC_FILTER</strong></td>
<td>Float x</td>
<td>X_VALUE</td>
<td>accBundle.getFloat(X_VALUE)</td>
</tr>
<tr>
<td></td>
<td>Float y</td>
<td>Y_VALUE</td>
<td>accBundle.getFloat(Y_VALUE)</td>
</tr>
<tr>
<td></td>
<td>Float z</td>
<td>Z_VALUE</td>
<td>accBundle.getFloat(Z_VALUE)</td>
</tr>
</tbody></table>

<h2 id="capturing-data">Capturing Data</h2>

<ul>
<li>Once the developer is able to receive data from the <em>Service</em> and is authorised (See <a href ="#google-sign-in">Google Sign-In Section</a>), they can start to send data to the <strong>SensumAPI</strong>.</li>
<li>To do this the developer should create a <em>Button</em> object that implements the <code class="prettyprint">sendToService</code> method (See <a href = "interacting-with-the-service">Hello example</a> &amp; <a href ="#table-2">Table 2</a> for more info).</li>
<li>The arguments that this method expects are: a <em>Bundle</em> object and the <strong>START_CAPTURE</strong> command. This will send a message to the Service to start sending captured data to the <strong>SensumAPI</strong>.</li>
<li>The content of Code Snippet 15 displays a method that we have created that returns a bundle holding data relevant to the <strong>START_CAPTURE</strong> command. The data held in this bundle informs the <strong>SensumSDK</strong> which metrics are to be recorded, in addition to the frequency at which these metrics should be sent to the <strong>SensumAPI</strong>.</li>
</ul>

<blockquote>
<p>Code Snippet 15</p>
</blockquote>
<pre class="highlight java tab-java"><code><span class="kd">public</span> <span class="n">Bundle</span> <span class="nf">getCaptureBundle</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">Bundle</span> <span class="n">bundle</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Bundle</span><span class="o">();</span>
        <span class="n">bundle</span><span class="o">.</span><span class="na">putBoolean</span><span class="o">(</span><span class="n">ServiceConstants</span><span class="o">.</span><span class="na">ACCELERATION_CAPTURE</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>
        <span class="n">bundle</span><span class="o">.</span><span class="na">putBoolean</span><span class="o">(</span><span class="n">ServiceConstants</span><span class="o">.</span><span class="na">HR_CAPTURE</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>
        <span class="n">bundle</span><span class="o">.</span><span class="na">putBoolean</span><span class="o">(</span><span class="n">ServiceConstants</span><span class="o">.</span><span class="na">GPS_CAPTURE</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>
        <span class="n">bundle</span><span class="o">.</span><span class="na">putBoolean</span><span class="o">(</span><span class="n">ServiceConstants</span><span class="o">.</span><span class="na">GSR_CAPTURE</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>
        <span class="n">bundle</span><span class="o">.</span><span class="na">putBoolean</span><span class="o">(</span><span class="n">ServiceConstants</span><span class="o">.</span><span class="na">INPUT_CAPTURE</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>
        <span class="n">bundle</span><span class="o">.</span><span class="na">putLong</span><span class="o">(</span><span class="n">ServiceConstants</span><span class="o">.</span><span class="na">DATA_RATE_SEND</span><span class="o">,</span> <span class="mi">1000</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">bundle</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre>
<ul>
<li>In the same way another <em>Button</em> should be created to stop the recording.</li>
<li>This <em>Button</em> should implement the <code class="prettyprint">sendToService</code> method, the arguments that it expects are identical to those used for the <strong>START_CAPTURE</strong> command (see Code Snippet 16).</li>
</ul>

<blockquote>
<p>Code Snippet 16</p>
</blockquote>
<pre class="highlight java tab-java"><code><span class="n">sendToService</span><span class="o">(</span><span class="n">getCaptureBundle</span><span class="o">(),</span> <span class="n">START_CAPTURE</span><span class="o">);</span>
<span class="o">...</span>
<span class="n">sendToService</span><span class="o">(</span><span class="n">getCaptureBundle</span><span class="o">(),</span> <span class="n">CANCEL_CAPTURE</span><span class="o">);</span>
</code></pre>
<h2 id="receiving-values-from-sensumapi">Receiving Values from SensumAPI</h2>

<ul>
<li>Receiving the value from the <strong>SensumAPI</strong> works in the same way as receiving values from a device.</li>
<li>The <em>BroadcastReceiver</em> in your <code class="prettyprint">MainActivity</code> should implement the â€˜filtersâ€™ shown in Table 4.</li>
</ul>

<h3 id="table-4-additional-broadcast-receiver-filters">Table 4: Additional Broadcast Receiver Filters</h3>

<table><thead>
<tr>
<th>Action</th>
<th>(description)</th>
<th>Intent Extras</th>
</tr>
</thead><tbody>
<tr>
<td><strong>HR_EVENT_FILTER</strong></td>
<td>Filters for heart rate events</td>
<td><code class="prettyprint">null</code></td>
</tr>
<tr>
<td><strong>ACC_EVENT_FILTER</strong></td>
<td>Filters for acceleration events</td>
<td><code class="prettyprint">null</code></td>
</tr>
<tr>
<td><strong>AROUSAL_FILTER</strong></td>
<td>Filters for arousal events</td>
<td><code class="prettyprint">null</code></td>
</tr>
<tr>
<td><strong>GPS_EVENT_FILTER</strong></td>
<td>Filters for GPS events</td>
<td><code class="prettyprint">null</code></td>
</tr>
<tr>
<td><strong>GSR_EVENT_FILTER</strong></td>
<td>Filters for GSR events</td>
<td><code class="prettyprint">null</code></td>
</tr>
<tr>
<td><strong>EMOJI_SENTIMENT_FILTER</strong></td>
<td>Filters for Emoji Sentiment values</td>
<td><code class="prettyprint">Bundle</code></td>
</tr>
<tr>
<td><strong>TEXT_SENTIMENT_FILTER</strong></td>
<td>Filters for Text Sentiment values</td>
<td><code class="prettyprint">Bundle</code></td>
</tr>
</tbody></table>

<ul>
<li>These filters should also be added to your <code class="prettyprint">getUpdateFilter</code> method (Code Snippet 17).</li>
</ul>

<blockquote>
<p>Code Snippet 17</p>
</blockquote>
<pre class="highlight java tab-java"><code><span class="kd">private</span> <span class="n">IntentFilter</span> <span class="nf">getUpdateIntentFilter</span><span class="o">()</span> <span class="o">{</span>
      <span class="n">IntentFilter</span> <span class="n">filter</span> <span class="o">=</span> <span class="k">new</span> <span class="n">IntentFilter</span><span class="o">();</span>
        <span class="n">filter</span><span class="o">.</span><span class="na">addAction</span><span class="o">(</span><span class="n">HELLO_FILTER</span><span class="o">);</span>
        <span class="n">filter</span><span class="o">.</span><span class="na">addAction</span><span class="o">(</span><span class="n">GPS_FILTER</span><span class="o">);</span>
        <span class="n">filter</span><span class="o">.</span><span class="na">addAction</span><span class="o">(</span><span class="n">ACC_FILTER</span><span class="o">);</span>
        <span class="n">filter</span><span class="o">.</span><span class="na">addAction</span><span class="o">(</span><span class="n">HR_FILTER</span><span class="o">);</span>
        <span class="n">filter</span><span class="o">.</span><span class="na">addAction</span><span class="o">(</span><span class="n">GSR_FILTER</span><span class="o">);</span>
        <span class="n">filter</span><span class="o">.</span><span class="na">addAction</span><span class="o">(</span><span class="n">API_RESPONSE</span><span class="o">);</span>
        <span class="n">filter</span><span class="o">.</span><span class="na">addAction</span><span class="o">(</span><span class="n">TOAST_MESSAGE</span><span class="o">);</span>
        <span class="n">filter</span><span class="o">.</span><span class="na">addAction</span><span class="o">(</span><span class="n">HR_EVENT_FILTER</span><span class="o">);</span>
        <span class="n">filter</span><span class="o">.</span><span class="na">addAction</span><span class="o">(</span><span class="n">AROUSAL_FILTER</span><span class="o">);</span>
        <span class="n">filter</span><span class="o">.</span><span class="na">addAction</span><span class="o">(</span><span class="n">GSR_EVENT_FILTER</span><span class="o">);</span>
        <span class="n">filter</span><span class="o">.</span><span class="na">addAction</span><span class="o">(</span><span class="n">EMOJI_SENTIMENT_FILTER</span><span class="o">);</span>
        <span class="n">filter</span><span class="o">.</span><span class="na">addAction</span><span class="o">(</span><span class="n">TEXT_SENTIMENT_FILTER</span><span class="o">);</span>
      <span class="k">return</span> <span class="n">filter</span><span class="o">;</span>
  <span class="o">}</span>
</code></pre>
<h2 id="realm-queries">Realm Queries</h2>

<ul>
<li>We use <em>Realm</em> to safely and efficiently store and query data from the response the <strong>SensumAPI</strong> returns. We recommend you take some time to study the RealmDocs <a href = "https://realm.io/docs/java/latest/"> here</a>. We are using version 4.2.0.</li>
<li>A significant advantage for developers using the <strong>SensumSDK</strong> is the ability to query the <em>Realm</em> database from the front-end to see what data has been captured/stored.</li>
<li>Data is persisted in <em>Realm</em> for a session as long as the user doesn&rsquo;t start a new session using <strong>START_CAPTURE</strong>, before staring a new session the data for the old session is deleted from <em>Realm</em> to avoid mixing user&rsquo;s data accross multiple sessions, therefore if the data for a session needs to be persisted it would need to be saved before starting a new session. When an event has been received by the <em>BroadcastReceiver</em>, the developer can query the <em>Realm</em> database to retrieve the values received from the <strong>SensumAPI</strong>.</li>
<li>The <strong>AROUSAL_EVENT_FILTER</strong> lets the developer know that the <strong>SensumSDK</strong> has received an â€˜arousal eventâ€™. Code Snippet 18 displays how the developer could query <em>Realm</em> to see the values stored.</li>
<li>Please note, on application launch ensure you call <code class="prettyprint">Realm.init(context)</code> prior to querying Realm to avoid throwing an exception.</li>
</ul>

<blockquote>
<p>Code Snippet 18</p>
</blockquote>
<pre class="highlight java tab-java"><code><span class="kd">private</span> <span class="kt">void</span> <span class="nf">queryRealmForArousalStats</span><span class="o">()</span> <span class="o">{</span>
   <span class="k">try</span> <span class="o">{</span>
       <span class="n">Realm</span><span class="o">.</span><span class="na">init</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
       <span class="n">Realm</span> <span class="n">realm</span> <span class="o">=</span> <span class="n">Realm</span><span class="o">.</span><span class="na">getDefaultInstance</span><span class="o">().</span><span class="na">getDefaultInstance</span><span class="o">();</span>
       <span class="n">RealmResults</span><span class="o">&lt;</span><span class="n">ArousalStats</span><span class="o">&gt;</span> <span class="n">realmResults</span> <span class="o">=</span> <span class="n">realm</span><span class="o">.</span><span class="na">where</span><span class="o">(</span><span class="n">ArousalStats</span><span class="o">.</span><span class="na">class</span><span class="o">).</span><span class="na">findAll</span><span class="o">();</span>
       <span class="n">realmResults</span><span class="o">.</span><span class="na">load</span><span class="o">();</span>
       <span class="k">if</span> <span class="o">(!</span><span class="n">realmResults</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">())</span> <span class="o">{</span>
           <span class="k">for</span> <span class="o">(</span><span class="n">ArousalStats</span> <span class="n">realmRecords</span> <span class="o">:</span> <span class="n">realmResults</span><span class="o">)</span> <span class="o">{</span>
               <span class="n">updateArousalStats</span><span class="o">(</span><span class="n">realmRecords</span><span class="o">);</span>
           <span class="o">}</span>
       <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
           <span class="n">Log</span><span class="o">.</span><span class="na">d</span><span class="o">(</span><span class="n">TAG</span><span class="o">,</span> <span class="s">"No arousal stats data found in the database"</span><span class="o">);</span>
       <span class="o">}</span>
   <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Throwable</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
       <span class="n">Log</span><span class="o">.</span><span class="na">d</span><span class="o">(</span><span class="n">TAG</span><span class="o">,</span> <span class="s">"Unable to get arousal stats data from the database "</span> <span class="o">+</span> <span class="n">e</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
   <span class="o">}</span>
<span class="o">}</span>

<span class="kd">private</span> <span class="kt">void</span> <span class="nf">updateArousalStats</span><span class="o">(</span><span class="n">ArousalStats</span> <span class="n">arousalStats</span><span class="o">)</span> <span class="o">{</span>
   <span class="n">ArousalSectors</span> <span class="n">arousalSectors</span> <span class="o">=</span> <span class="n">arousalStats</span><span class="o">.</span><span class="na">getArousalSectors</span><span class="o">();</span>
   <span class="kt">double</span> <span class="n">activated</span> <span class="o">=</span> <span class="n">arousalSectors</span><span class="o">.</span><span class="na">getActivated</span><span class="o">();</span>
   <span class="kt">double</span> <span class="n">calm</span> <span class="o">=</span> <span class="n">arousalSectors</span><span class="o">.</span><span class="na">getCalm</span><span class="o">();</span>
   <span class="kt">double</span> <span class="n">excited</span> <span class="o">=</span> <span class="n">arousalSectors</span><span class="o">.</span><span class="na">getExcited</span><span class="o">();</span>
   <span class="kt">double</span> <span class="n">passive</span> <span class="o">=</span> <span class="n">arousalSectors</span><span class="o">.</span><span class="na">getPassive</span><span class="o">();</span>
   <span class="kt">double</span> <span class="n">relaxed</span> <span class="o">=</span> <span class="n">arousalSectors</span><span class="o">.</span><span class="na">getRelaxed</span><span class="o">();</span>
<span class="o">}</span>
</code></pre>
<ul>
<li>Code Snippet 18 shows the <code class="prettyprint">ArousalStats</code> object. Each record of the object has associated values attached, displayed in the <code class="prettyprint">updateArousalStats</code> method.</li>
<li>Tables 5 - 16 display the <em>Realm</em> objects that the <strong>SensumSDK</strong> holds. These objects contain methods and values associated with the response from the <strong>SensumAPI</strong>.</li>
</ul>

<h3 id="table-5-example-event-realm-object">Table 5: Example Event Realm Object</h3>

<table><thead>
<tr>
<th>Object</th>
<th>Associated Methods</th>
<th>Method Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">ResHeartRate</code> Events associated with Heart Rate</td>
<td><code class="prettyprint">getValue()</code></td>
<td>String</td>
<td>Retrieves a value associated with the event event - min, max, normal, rising, falling</td>
</tr>
<tr>
<td></td>
<td><code class="prettyprint">getTime()</code></td>
<td>long</td>
<td>Event time</td>
</tr>
<tr>
<td></td>
<td><code class="prettyprint">getSeverity()</code></td>
<td>double</td>
<td>How much of value change between forward/backward events with respect to the average value</td>
</tr>
</tbody></table>

<h3 id="table-6-sensumsdk-realm-objects">Table 6: SensumSDK Realm Objects</h3>

<table><thead>
<tr>
<th>Objects</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">ResAccelerometerX</code></td>
</tr>
<tr>
<td><code class="prettyprint">ResAccelerometerY</code></td>
</tr>
<tr>
<td><code class="prettyprint">ResAccelerometerZ</code></td>
</tr>
<tr>
<td><code class="prettyprint">ResGpsAccuracy</code></td>
</tr>
<tr>
<td><code class="prettyprint">ResGpsAltitude</code></td>
</tr>
<tr>
<td><code class="prettyprint">ResGpsBearing</code></td>
</tr>
<tr>
<td><code class="prettyprint">ResGpsLatitude</code></td>
</tr>
<tr>
<td><code class="prettyprint">ResGpsLongitude</code></td>
</tr>
<tr>
<td><code class="prettyprint">ResGpsSpeed</code></td>
</tr>
<tr>
<td><code class="prettyprint">ResGSR</code></td>
</tr>
<tr>
<td><code class="prettyprint">ResHeartRateTestData</code></td>
</tr>
</tbody></table>

<h3 id="table-7-example-statistics-object">Table 7: Example Statistics Object</h3>

<table><thead>
<tr>
<th>Object</th>
<th>Associated Methods</th>
<th>Method Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">HeartRateStats</code></td>
<td><code class="prettyprint">getAvg()</code></td>
<td>Double</td>
<td>Returns an average value</td>
</tr>
<tr>
<td></td>
<td><code class="prettyprint">getDuration()</code></td>
<td>Double</td>
<td>Returns duration value</td>
</tr>
<tr>
<td></td>
<td><code class="prettyprint">getMax()</code></td>
<td>Double</td>
<td>Returns max value</td>
</tr>
<tr>
<td></td>
<td><code class="prettyprint">getMin()</code></td>
<td>double</td>
<td>Returns min value</td>
</tr>
<tr>
<td></td>
<td><code class="prettyprint">getPercentiles()</code></td>
<td>Percentiles</td>
<td>Returns a percentile object (see Table 9)</td>
</tr>
<tr>
<td></td>
<td><code class="prettyprint">getStd()</code></td>
<td>Double</td>
<td>Returns a standard deviation value</td>
</tr>
</tbody></table>

<h3 id="table-8-sensumsdk-statistics-objects">Table 8: SensumSDK Statistics Objects</h3>

<table><thead>
<tr>
<th>Objects</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">AccelerometerXStats</code></td>
</tr>
<tr>
<td><code class="prettyprint">AccelerometerYStats</code></td>
</tr>
<tr>
<td><code class="prettyprint">AccelerometerZStats</code></td>
</tr>
<tr>
<td><code class="prettyprint">GpsAccuracyStats</code></td>
</tr>
<tr>
<td><code class="prettyprint">GpsAltitudeStats</code></td>
</tr>
<tr>
<td><code class="prettyprint">GpsBearingStats</code></td>
</tr>
<tr>
<td><code class="prettyprint">GpsLatitudeStats</code></td>
</tr>
<tr>
<td><code class="prettyprint">GpsLongitudeStats</code></td>
</tr>
<tr>
<td><code class="prettyprint">GpsSpeedStats</code></td>
</tr>
<tr>
<td><code class="prettyprint">GsrStats</code></td>
</tr>
</tbody></table>

<h3 id="table-9-sensumsdk-percentiles-object">Table 9: SensumSDK Percentiles Object</h3>

<table><thead>
<tr>
<th>Object</th>
<th>Associated Methods</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">Percentiles</code></td>
<td><code class="prettyprint">get10()</code></td>
<td>double</td>
<td>Returns 10th percentile value</td>
</tr>
<tr>
<td></td>
<td><code class="prettyprint">get50()</code></td>
<td>double</td>
<td>Returns 50th percentile value</td>
</tr>
<tr>
<td></td>
<td><code class="prettyprint">get90()</code></td>
<td>double</td>
<td>Returns 90th percentile value</td>
</tr>
</tbody></table>

<h3 id="table-10-arousalstats-realm-object">Table 10: ArousalStats Realm Object</h3>

<table><thead>
<tr>
<th>Object</th>
<th>Associated Methods</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">ArousalStats</code></td>
<td><code class="prettyprint">getValue()</code></td>
<td>double</td>
<td>Returns an activation value</td>
</tr>
<tr>
<td></td>
<td><code class="prettyprint">getDominant()</code></td>
<td>String</td>
<td>Label of the dominant classification category</td>
</tr>
<tr>
<td></td>
<td><code class="prettyprint">getSectors()</code></td>
<td>ArousalSectors</td>
<td>Returns the sectors associated with the arousal stats object (Table 11)</td>
</tr>
</tbody></table>

<h3 id="table-11-arousalsectors-realm-object">Table 11: ArousalSectors Realm Object</h3>

<table><thead>
<tr>
<th>Object</th>
<th>Associated Methods</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">ArousalSectors</code></td>
<td><code class="prettyprint">getExcited()</code></td>
<td>double</td>
<td>Returns a value associated with excitement</td>
</tr>
<tr>
<td></td>
<td><code class="prettyprint">getActivated()</code></td>
<td>double</td>
<td>Returns a value associated with activity</td>
</tr>
<tr>
<td></td>
<td><code class="prettyprint">getCalm()</code></td>
<td>double</td>
<td>Returns a value associated with calmness</td>
</tr>
<tr>
<td></td>
<td><code class="prettyprint">getPassive()</code></td>
<td>double</td>
<td>Returns a value associated with passiveness</td>
</tr>
<tr>
<td></td>
<td><code class="prettyprint">getRelaxed()</code></td>
<td>double</td>
<td>Returns a value associated with relaxation</td>
</tr>
</tbody></table>

<h3 id="table-12-engagementstats-realm-object">Table 12: EngagementStats Realm Object</h3>

<table><thead>
<tr>
<th>Object</th>
<th>Associated Methods</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">EngagementStats</code></td>
<td><code class="prettyprint">getValue()</code></td>
<td>double</td>
<td>Returns an activation value</td>
</tr>
<tr>
<td></td>
<td><code class="prettyprint">getDominant()</code></td>
<td>String</td>
<td>Label of the dominant classification category</td>
</tr>
<tr>
<td></td>
<td><code class="prettyprint">getSectors()</code></td>
<td>EngagementSectors</td>
<td>Returns the sectors associated with the engagement stats object (Table 13)</td>
</tr>
</tbody></table>

<h3 id="table-13-engagmentsectors-realm-object">Table 13: EngagmentSectors Realm Object</h3>

<table><thead>
<tr>
<th>Object</th>
<th>Associated Methods</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">EngagmentSectors</code></td>
<td><code class="prettyprint">getHighlyEngaged()</code></td>
<td>double</td>
<td>Returns a value associated with highly engaged</td>
</tr>
<tr>
<td></td>
<td><code class="prettyprint">getEngaged()</code></td>
<td>double</td>
<td>Returns a value associated with engaged</td>
</tr>
<tr>
<td></td>
<td><code class="prettyprint">getActivated()</code></td>
<td>double</td>
<td>Returns a value associated with activiated</td>
</tr>
<tr>
<td></td>
<td><code class="prettyprint">getNeutral()</code></td>
<td>double</td>
<td>Returns a value associated with neutral</td>
</tr>
</tbody></table>

<ul>
<li>Sentiment values are returned via the <em>BroadcastReceiver</em> (see Table 4).</li>
<li>When the developer sends a message to the service using the <strong>INPUT_SENTIMENT_TEXT</strong> command, the associated <em>String</em> object that is sent to the <em>Service</em> (see Table 2) is also sent to the <strong>SensumAPI</strong>, before a value is returned to the <strong>SensumSDK</strong>. Depending on the type of input (i.e. text or emoji), a <em>Bundle</em> is returned to the front-end.</li>
<li><p>To receive this bundle the developer should include the <strong>TEXT_SENTIMENT_FILTER</strong> and <strong>EMOJI_SENTIMENT_FILTER</strong>  within the BroadcastReceivers <code class="prettyprint">onReceive</code> method.</p></li>
<li><p>The <em>Bundle</em> contains three values of type double (see Table 14).</p></li>
</ul>

<h3 id="table-14-sentiment-filter-data">Table 14: Sentiment Filter Data</h3>

<table><thead>
<tr>
<th>Object</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">EMOTIONALITY</code></td>
<td>double</td>
<td>Returns a value associated with emotionality</td>
</tr>
<tr>
<td><code class="prettyprint">POSITIVITY</code></td>
<td>double</td>
<td>Returns a value associated with positivity</td>
</tr>
<tr>
<td><code class="prettyprint">NEGATIVITY</code></td>
<td>double</td>
<td>Returns a value associated with negativity</td>
</tr>
</tbody></table>

<ul>
<li>These events are returned via a <em>BroadcastIntent</em> rather than retrieved from the <em>Realm</em> database; therefore they should be listened for in the <em>BroadcastReceiver</em>&lsquo;s <code class="prettyprint">onReceive</code> method.</li>
</ul>

<h3 id="table-15-activitystats-realm-object">Table 15: ActivityStats Realm Object</h3>

<table><thead>
<tr>
<th>Object</th>
<th>Associated Methods</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">ActivityStats</code></td>
<td><code class="prettyprint">getValue()</code></td>
<td>double</td>
<td>Returns an activation value</td>
</tr>
<tr>
<td></td>
<td><code class="prettyprint">getDominant()</code></td>
<td>String</td>
<td>Label of the dominant classification category</td>
</tr>
<tr>
<td></td>
<td><code class="prettyprint">getSectors()</code></td>
<td>ActivitySectors</td>
<td>Returns the sectors associated with the activity stats object (Table 16)</td>
</tr>
</tbody></table>

<h3 id="table-16-activitysectors-realm-object">Table 16: ActivitySectors Realm Object</h3>

<table><thead>
<tr>
<th>Object</th>
<th>Associated Methods</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">ActivitySectors</code></td>
<td><code class="prettyprint">getActive()</code></td>
<td>double</td>
<td>Returns a value associated with active</td>
</tr>
<tr>
<td></td>
<td><code class="prettyprint">getInactive()</code></td>
<td>double</td>
<td>Returns a value associated with inactive</td>
</tr>
</tbody></table>

<ul>
<li>The values returned can be used to display data in a variety of ways. We recommend using a charting library to show this data coming in from the <strong>SensumSDK</strong>.</li>
<li>To access these objects the developer should query the <em>Realm</em> database (see previous example in Code Snippet 18) to access the desired values.</li>
</ul>

<h2 id="google-sign-in">Google Sign-In</h2>

<ul>
<li><p>For more detailed instuctions on how to implement <em>Google Sign-In</em> please refer to Google&rsquo;s <a href = "https://developers.google.com/identity/sign-in/android/start-integrating">documentation</a>.</p></li>
<li><p>For <em>Google Sign-In</em>, a <em>Play Service</em> dependency needs to be added to the app Gradle (Code Snippet 19).</p></li>
</ul>

<blockquote>
<p>Code Snippet 19</p>
</blockquote>
<pre class="highlight java tab-java"><code><span class="n">implementation</span> <span class="err">'</span><span class="n">com</span><span class="o">.</span><span class="na">google</span><span class="o">.</span><span class="na">android</span><span class="o">.</span><span class="na">gms</span><span class="o">:</span><span class="n">play</span><span class="o">-</span><span class="n">services</span><span class="o">-</span><span class="nl">auth:</span><span class="mf">11.0</span><span class="o">.</span><span class="mi">4</span><span class="err">'</span>
</code></pre>
<ul>
<li>As part of enabling <em>Google APIs</em> or <em>Firebase</em> services in your Android application the <code class="prettyprint">google-services.json</code> is processed by the <code class="prettyprint">google-services</code> plugin.</li>
<li>The <code class="prettyprint">google-services.json</code> is created using <em>Firebase</em> during enabling <em>Google Services</em> for your Android application and is generally placed in the <strong>app/</strong> directory (at the root of the Android Studio app module).</li>
<li>For <em>Google Sign-In</em> to work with <em>AWS</em> authentication, <code class="prettyprint">OAuth 2.0 client ID</code> (<em>Google Android Client ID</em>) is required by <em>AWS</em>.</li>
<li><p>The <em>Google Android Client ID</em> is created using <em>Google Developer Console</em> by providing your Android application package name and the SHA-1 signing-certificate fingerprint from Android Studio. The generated <em>Google Android Client ID</em> needs to be given to us for adding it to <em>AWS</em> for authentication. You can contact us at <em>hello@sensum.co</em> and title your email <em>Add my Google Android Client ID</em>.</p></li>
<li><p>In the <code class="prettyprint">onCreate()</code> method of your sign-in <code class="prettyprint">Activity</code>, the <code class="prettyprint">GoogleSignInOptions</code> object should be instantiated. This object is used to create the <code class="prettyprint">GoogleApiClient</code> which is used for accessing the <em>Google Sign-In API</em>.</p></li>
<li><p>The <em>Google Web Client ID</em> which is created in the <em>Google Developer Console</em> is required during the creation of the <em>Google Sign-In</em> object (shown in Code Snippet 20 as the <code class="prettyprint">gso</code> object).</p></li>
</ul>

<blockquote>
<p>Code Snippet 20</p>
</blockquote>
<pre class="highlight java tab-java"><code><span class="n">GoogleSignInOptions</span> <span class="n">gso</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GoogleSignInOptions</span><span class="o">.</span><span class="na">Builder</span><span class="o">(</span><span class="n">GoogleSignInOptions</span><span class="o">.</span><span class="na">DEFAULT_SIGN_IN</span><span class="o">)</span>
       <span class="o">.</span><span class="na">requestEmail</span><span class="o">()</span>
       <span class="o">.</span><span class="na">requestProfile</span><span class="o">()</span>
       <span class="o">.</span><span class="na">requestIdToken</span><span class="o">(</span><span class="n">googleWebClientId</span><span class="o">)</span>
       <span class="o">.</span><span class="na">requestServerAuthCode</span><span class="o">(</span><span class="n">googleWebClientId</span><span class="o">)</span>
       <span class="o">.</span><span class="na">requestId</span><span class="o">()</span>
       <span class="o">.</span><span class="na">build</span><span class="o">();</span>

<span class="n">GoogleApiClient</span> <span class="n">googleApiClient</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GoogleApiClient</span><span class="o">.</span><span class="na">Builder</span><span class="o">(</span><span class="k">this</span><span class="o">)</span>
       <span class="o">.</span><span class="na">enableAutoManage</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="k">this</span> <span class="o">)</span>
       <span class="o">.</span><span class="na">addApi</span><span class="o">(</span><span class="n">Auth</span><span class="o">.</span><span class="na">GOOGLE_SIGN_IN_API</span><span class="o">,</span> <span class="n">gso</span><span class="o">)</span>
       <span class="o">.</span><span class="na">build</span><span class="o">();</span>
</code></pre>
<ul>
<li>The <em>Google Sign-In</em> needs to be triggered, this is achieved via an <em>Intent</em>. Code Snippet 21 illustrates this.</li>
</ul>

<blockquote>
<p>Code Snippet 21</p>
</blockquote>
<pre class="highlight java tab-java"><code><span class="n">Intent</span> <span class="n">signInIntent</span> <span class="o">=</span> <span class="n">Auth</span><span class="o">.</span><span class="na">GoogleSignInApi</span><span class="o">.</span><span class="na">getSignInIntent</span><span class="o">(</span><span class="n">googleApiClient</span><span class="o">);</span>
<span class="k">this</span><span class="o">.</span><span class="na">startActivityForResult</span><span class="o">(</span><span class="n">signInIntent</span><span class="o">,</span> <span class="n">RC_SIGN_IN</span><span class="o">);</span>
</code></pre>
<ul>
<li>In <code class="prettyprint">onActivityResult</code>, the <em>Google Sign-In</em> results should be handled and upon successful sign-in, the <em>Google Id Token</em> and <em>Google Web Client ID</em> need to be passed to the <strong>SensumSDK</strong> as a <em>Bundle</em>.</li>
<li>This <em>Bundle</em> is utilised to maintain the capture-session whilst using the <strong>SensumSDK</strong>. For authentication the <strong>SensumAPI</strong> <em>base URL</em>, <em>key</em> and <em>AWS Identity Pool ID</em> are also needed to be defined and passed as a <em>Bundle</em>.</li>
<li>The <strong>SensumSDK</strong> <em>ServiceConstants</em> are used to pass the authentication parameters to the <strong>SensumSDK</strong> via a <em>Bundle</em>. Code Snippet 22 provides an example of this.</li>
</ul>

<h4 id="bundle-parameters">Bundle Parameters</h4>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">apiBaseUrl</code></td>
<td>String</td>
<td>This is the base url for the API, currently this is <code class="prettyprint">http://emotionai.sensum.co/v0</code></td>
</tr>
<tr>
<td><code class="prettyprint">apiKey</code></td>
<td>String</td>
<td>This is the API Key that will be required to access the <strong>SensumAPI</strong>(For trial usage use <code class="prettyprint">PublicDemoKeyForDocumentation</code>)</td>
</tr>
<tr>
<td><code class="prettyprint">identityPoolId</code></td>
<td>String</td>
<td>The CognitoIdentityPoolId required to successfully authenticate with the <strong>SensumAPI</strong>. We will provide you with this.</td>
</tr>
<tr>
<td><code class="prettyprint">googleIdToken</code></td>
<td>String</td>
<td>This is the google id token returned when successfully logged in with a valid Google account</td>
</tr>
<tr>
<td><code class="prettyprint">googleWebClientId</code>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</td>
<td>String</td>
<td>This is the web client id that was created when you set up sign-in with Google. It can be found in the Credentials page under &#39;APIs and Service&rsquo; in the <a href = "https://console.cloud.google.com/home/dashboard?project=firebase-tutorialapplication">Google Cloud Platform</a> page</td>
</tr>
</tbody></table>

<blockquote>
<p>Code Snippet 22</p>
</blockquote>
<pre class="highlight java tab-java"><code><span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onActivityResult</span><span class="o">(</span><span class="kt">int</span> <span class="n">requestCode</span><span class="o">,</span> <span class="kt">int</span> <span class="n">resultCode</span><span class="o">,</span> <span class="n">Intent</span> <span class="n">data</span><span class="o">)</span> <span class="o">{</span>
   <span class="kd">super</span><span class="o">.</span><span class="na">onActivityResult</span><span class="o">(</span><span class="n">requestCode</span><span class="o">,</span> <span class="n">resultCode</span><span class="o">,</span> <span class="n">data</span><span class="o">);</span>
   <span class="k">if</span> <span class="o">(</span><span class="n">requestCode</span> <span class="o">==</span> <span class="n">RC_SIGN_IN</span><span class="o">)</span> <span class="o">{</span>
       <span class="n">GoogleSignInResult</span> <span class="n">result</span> <span class="o">=</span> <span class="n">Auth</span><span class="o">.</span><span class="na">GoogleSignInApi</span><span class="o">.</span><span class="na">getSignInResultFromIntent</span><span class="o">(</span><span class="n">data</span><span class="o">);</span>
       <span class="n">GoogleSignInAccount</span> <span class="n">acct</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="na">getSignInAccount</span><span class="o">();</span>
       <span class="n">String</span> <span class="n">googleIdToken</span> <span class="o">=</span> <span class="n">acct</span><span class="o">.</span><span class="na">getIdToken</span><span class="o">();</span>
       <span class="n">Bundle</span> <span class="n">bundle</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Bundle</span><span class="o">();</span>
       <span class="n">bundle</span><span class="o">.</span><span class="na">putString</span><span class="o">(</span><span class="n">API_BASEURL</span><span class="o">,</span> <span class="n">apiBaseUrl</span><span class="o">);</span>
       <span class="n">bundle</span><span class="o">.</span><span class="na">putString</span><span class="o">(</span><span class="n">API_KEY</span><span class="o">,</span> <span class="n">apiKey</span><span class="o">);</span>
       <span class="n">bundle</span><span class="o">.</span><span class="na">putString</span><span class="o">(</span><span class="n">IDENTITY_POOL_ID</span><span class="o">,</span> <span class="n">identityPoolId</span><span class="o">);</span>
       <span class="n">bundle</span><span class="o">.</span><span class="na">putString</span><span class="o">(</span><span class="n">GOOGLE_ID_TOKEN</span><span class="o">,</span> <span class="n">googleIdToken</span><span class="o">);</span>
       <span class="n">bundle</span><span class="o">.</span><span class="na">putString</span><span class="o">(</span><span class="n">GOOGLE_WEB_CLIENT_ID</span><span class="o">,</span> <span class="n">googleWebClientId</span><span class="o">);</span>
       <span class="n">sendToService</span><span class="o">(</span><span class="n">bundle</span><span class="o">,</span> <span class="n">GOOGLE_LOGIN</span><span class="o">);</span>
   <span class="o">}</span>
<span class="o">}</span>
</code></pre>
<h2 id="gradle-dependencies">Gradle Dependencies</h2>

<ul>
<li>Code Snippet 23 displays the top level Gradle Dependencies that the developer will need to include to successfully run the application.</li>
</ul>

<blockquote>
<p>Code Snippet 23</p>
</blockquote>
<pre class="highlight java tab-java"><code>    <span class="n">classpath</span> <span class="s">"io.realm:realm-gradle-plugin:4.2.0"</span>
    <span class="n">allprojects</span> <span class="o">{</span>
    <span class="n">repositories</span> <span class="o">{</span>
        <span class="n">maven</span> <span class="o">{</span> <span class="n">url</span>  <span class="s">"http://dl.bintray.com/shimmerengineering/Shimmer"</span> <span class="o">}</span>
        <span class="n">google</span><span class="o">()</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre>
<ul>
<li>Code Snippet 24 displays the app level Gradle Dependencies that the developer will need to include to successfully run the application. While newer versions of these dependencies are available we cannot guarantee the reliable functionality.</li>
</ul>

<blockquote>
<p>Code Snippet 24</p>
</blockquote>
<pre class="highlight java tab-java"><code>    <span class="n">compile</span> <span class="err">'</span><span class="n">com</span><span class="o">.</span><span class="na">amazonaws</span><span class="o">:</span><span class="n">aws</span><span class="o">-</span><span class="n">android</span><span class="o">-</span><span class="n">sdk</span><span class="o">-</span><span class="nl">core:</span><span class="mf">2.6</span><span class="o">.</span><span class="mi">18</span><span class="err">'</span>
    <span class="n">compile</span> <span class="err">'</span><span class="n">com</span><span class="o">.</span><span class="na">amazonaws</span><span class="o">:</span><span class="n">aws</span><span class="o">-</span><span class="n">android</span><span class="o">-</span><span class="n">sdk</span><span class="o">-</span><span class="nl">s3:</span><span class="mf">2.6</span><span class="o">.</span><span class="mi">18</span><span class="err">'</span>
    <span class="n">compile</span> <span class="err">'</span><span class="n">com</span><span class="o">.</span><span class="na">amazonaws</span><span class="o">:</span><span class="n">aws</span><span class="o">-</span><span class="n">android</span><span class="o">-</span><span class="n">sdk</span><span class="o">-</span><span class="nl">cognito:</span><span class="mf">2.6</span><span class="o">.</span><span class="mi">18</span><span class="err">'</span>
    <span class="n">compile</span> <span class="err">'</span><span class="n">com</span><span class="o">.</span><span class="na">amazonaws</span><span class="o">:</span><span class="n">aws</span><span class="o">-</span><span class="n">android</span><span class="o">-</span><span class="n">sdk</span><span class="o">-</span><span class="nl">ddb:</span><span class="mf">2.6</span><span class="o">.</span><span class="mi">18</span><span class="err">'</span>
    <span class="n">compile</span> <span class="err">'</span><span class="n">com</span><span class="o">.</span><span class="na">amazonaws</span><span class="o">:</span><span class="n">aws</span><span class="o">-</span><span class="n">android</span><span class="o">-</span><span class="n">sdk</span><span class="o">-</span><span class="nl">cognitoidentityprovider:</span><span class="mf">2.6</span><span class="o">.</span><span class="mi">18</span><span class="err">'</span>
    <span class="n">compile</span> <span class="err">'</span><span class="n">com</span><span class="o">.</span><span class="na">squareup</span><span class="o">.</span><span class="na">retrofit2</span><span class="o">:</span><span class="nl">retrofit:</span><span class="mf">2.4</span><span class="o">.</span><span class="mi">0</span><span class="err">'</span>
    <span class="n">compile</span> <span class="err">'</span><span class="n">com</span><span class="o">.</span><span class="na">squareup</span><span class="o">.</span><span class="na">retrofit2</span><span class="o">:</span><span class="n">converter</span><span class="o">-</span><span class="nl">moshi:</span><span class="mf">2.4</span><span class="o">.</span><span class="mi">0</span><span class="err">'</span>
    <span class="n">compile</span> <span class="err">'</span><span class="n">com</span><span class="o">.</span><span class="na">squareup</span><span class="o">.</span><span class="na">moshi</span><span class="o">:</span><span class="nl">moshi:</span><span class="mf">1.5</span><span class="o">.</span><span class="mi">0</span><span class="err">'</span>
    <span class="n">compile</span> <span class="err">'</span><span class="n">com</span><span class="o">.</span><span class="na">squareup</span><span class="o">.</span><span class="na">okhttp3</span><span class="o">:</span><span class="nl">okhttp:</span><span class="mf">3.10</span><span class="o">.</span><span class="mi">0</span><span class="err">'</span>
    <span class="n">compile</span> <span class="err">'</span><span class="n">com</span><span class="o">.</span><span class="na">squareup</span><span class="o">.</span><span class="na">okhttp3</span><span class="o">:</span><span class="n">logging</span><span class="o">-</span><span class="nl">interceptor:</span><span class="mf">3.10</span><span class="o">.</span><span class="mi">0</span><span class="err">'</span>
    <span class="n">compile</span> <span class="err">'</span><span class="n">com</span><span class="o">.</span><span class="na">google</span><span class="o">.</span><span class="na">code</span><span class="o">.</span><span class="na">gson</span><span class="o">:</span><span class="nl">gson:</span><span class="mf">2.8</span><span class="o">.</span><span class="mi">0</span><span class="err">'</span>
    <span class="n">compile</span> <span class="err">'</span><span class="n">com</span><span class="o">.</span><span class="na">google</span><span class="o">.</span><span class="na">guava</span><span class="o">:</span><span class="nl">guava:</span><span class="mf">19.0</span><span class="err">'</span>
    <span class="n">compile</span> <span class="err">'</span><span class="n">com</span><span class="o">.</span><span class="na">shimmerresearch</span><span class="o">.</span><span class="na">managers</span><span class="o">.</span><span class="na">bluetoothmanager</span><span class="o">:</span><span class="nl">ShimmerBluetoothManager:</span><span class="mf">0.9</span><span class="o">.</span><span class="mi">33</span><span class="n">beta</span><span class="err">'</span>
    <span class="n">compile</span> <span class="err">'</span><span class="n">com</span><span class="o">.</span><span class="na">shimmerresearch</span><span class="o">.</span><span class="na">driver</span><span class="o">:</span><span class="nl">ShimmerDriver:</span><span class="mf">0.9</span><span class="o">.</span><span class="mi">120</span><span class="n">beta</span><span class="err">'</span>
</code></pre>
          <h1 id="summary-guide">Summary Guide</h1>

<h2 id="api-control">API Control</h2>

<h3 id="setting-data-sending-request-rate-to-the-api">Setting Data Sending Request Rate to the API</h3>

<h4 id="android">Android</h4>

<p>When using the <code class="prettyprint">sendToService</code> method ensure that you send the integer parameters <strong>DATA_RATE_SEND</strong> as part of your bundle.</p>

<h3 id="listen-for-api-events">Listen for API events</h3>

<h4 id="android">Android</h4>

<p>Use a Broadcast Receiver</p>

<ul>
<li>A <em>BroadcastReceiver</em> â€˜listensâ€™ for (receives and handles) <em>Broadcast Intents</em>, sent by the <em>Service</em>.</li>
<li>The <em>BroadcastReceiver</em> is essential as it manages messages sent from the <strong>sdk-release</strong>, within the front-end application.</li>
<li>The <em>BroadcastReceiver</em> makes use of <em>Filters</em>, that determine which events the application should â€˜listenâ€™ for.</li>
<li>The over-ridden method <em>.onReceive</em> takes two arguments: <em>Context</em> and <em>Intent</em>. The <em>Intent</em> parameter has an associated action that specifies how the
<em>BroadcastReceiver</em> should behave.</li>
<li>Table 1 outlines the filters included in the <em>Service</em> and the <em>Intent Extras</em> they return.</li>
</ul>

<p>Table 1</p>

<table><thead>
<tr>
<th>Action</th>
<th>Description</th>
<th>IntentExtras</th>
</tr>
</thead><tbody>
<tr>
<td><strong>BLE_DEVICE_FILTER</strong></td>
<td>Filters for BLE devices</td>
<td><code class="prettyprint">ArrayList&lt;BluetoothDevice&gt;</code></td>
</tr>
<tr>
<td><strong>HR_FILTER</strong></td>
<td>Filters for heart rate value</td>
<td><code class="prettyprint">String</code></td>
</tr>
<tr>
<td><strong>GPS_FILTER</strong></td>
<td>Filters for GPS values</td>
<td><code class="prettyprint">Bundle</code></td>
</tr>
<tr>
<td><strong>ACC_FILTER</strong></td>
<td>Filters for acceleration values</td>
<td><code class="prettyprint">Bundle</code></td>
</tr>
<tr>
<td><strong>DEVICE_DISCONNECTED</strong></td>
<td>Filters for a device disconnected value</td>
<td><code class="prettyprint">null</code></td>
</tr>
<tr>
<td><strong>API_RESPONSE</strong></td>
<td>Filters for responses from the API</td>
<td><code class="prettyprint">String</code></td>
</tr>
<tr>
<td><strong>TOAST_MESSAGE</strong></td>
<td>Filters for messages from the Service</td>
<td><code class="prettyprint">String</code></td>
</tr>
<tr>
<td><strong>BLE_CONNECTION_FILTER</strong></td>
<td>Filters for connection BLE messages</td>
<td><code class="prettyprint">String</code></td>
</tr>
<tr>
<td><strong>BLUETOOTH_CONNECTION_FILTER</strong></td>
<td>Filters for bluetooth connection messages</td>
<td><code class="prettyprint">String</code></td>
</tr>
<tr>
<td><strong>BLUETOOTH_DEVICE_FILTER</strong></td>
<td>Filters for bluetooth devices</td>
<td><code class="prettyprint">ArrayList&lt;BluetoothDevice&gt;</code></td>
</tr>
<tr>
<td><strong>GSR_FILTER</strong></td>
<td>Filters for GSR values</td>
<td><code class="prettyprint">String</code></td>
</tr>
<tr>
<td><strong>ACC_FAILED_REGISTERED</strong></td>
<td>Filters for acceleration failure from unsupported devices</td>
<td><code class="prettyprint">null</code></td>
</tr>
<tr>
<td><strong>HELLO_FILTER</strong></td>
<td>Filters for hello message</td>
<td><code class="prettyprint">String</code></td>
</tr>
<tr>
<td><strong>HR_EVENT_FILTER</strong></td>
<td>Filters for heart rate events from the API</td>
<td><code class="prettyprint">String</code></td>
</tr>
<tr>
<td><strong>AROUSAL_FILTER</strong></td>
<td>Filters for heart rate arousals from the API</td>
<td><code class="prettyprint">String</code></td>
</tr>
<tr>
<td><strong>GSR_EVENT_FILTER</strong></td>
<td>Filters for GSR events from the API</td>
<td><code class="prettyprint">String</code></td>
</tr>
<tr>
<td><strong>EMOJI_SENTIMENT_FILTER</strong></td>
<td>Filters for emoji sentiment from the API</td>
<td><code class="prettyprint">String</code></td>
</tr>
<tr>
<td><strong>TEXT_SENTIMENT_FILTER</strong></td>
<td>Filters for text sentiment from the API</td>
<td><code class="prettyprint">String</code></td>
</tr>
</tbody></table>

<h2 id="setting-up-the-broadcast-receiver">Setting up the Broadcast Receiver</h2>

<ul>
<li>Code Snippet 1 contains all necessary code that will allow you to setup a <em>BroadcastReceiver</em>.</li>
</ul>

<blockquote>
<p>Code Snippet 1</p>
</blockquote>
<pre class="highlight java tab-java"><code>    <span class="kd">private</span> <span class="n">BroadcastReceiver</span> <span class="n">mMessageReceiver</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BroadcastReceiver</span><span class="o">()</span> <span class="o">{</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onReceive</span><span class="o">(</span><span class="n">Context</span> <span class="n">context</span><span class="o">,</span> <span class="n">Intent</span> <span class="n">intent</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">String</span> <span class="n">action</span> <span class="o">=</span> <span class="n">intent</span><span class="o">.</span><span class="na">getAction</span><span class="o">();</span>
            <span class="k">switch</span> <span class="o">(</span><span class="n">action</span><span class="o">){</span>
                <span class="k">case</span> <span class="nl">HELLO_FILTER:</span>
                    <span class="n">Toast</span><span class="o">.</span><span class="na">makeText</span><span class="o">(</span><span class="n">MainActivity</span><span class="o">.</span><span class="na">this</span><span class="o">,</span> <span class="n">intent</span><span class="o">.</span><span class="na">getStringExtra</span><span class="o">(</span><span class="n">EXTRA_DATA</span><span class="o">),</span> <span class="n">Toast</span><span class="o">.</span><span class="na">LENGTH_LONG</span><span class="o">).</span><span class="na">show</span><span class="o">();</span>
                    <span class="k">break</span><span class="o">;</span>
                <span class="k">case</span> <span class="nl">GPS_FILTER:</span>
                    <span class="n">Bundle</span> <span class="n">gpsBundle</span> <span class="o">=</span> <span class="n">intent</span><span class="o">.</span><span class="na">getBundleExtra</span><span class="o">(</span><span class="n">EXTRA_DATA</span><span class="o">);</span>
                    <span class="k">break</span><span class="o">;</span>
                <span class="k">case</span> <span class="nl">ACC_FILTER:</span>
                    <span class="n">Bundle</span> <span class="n">accBundle</span> <span class="o">=</span> <span class="n">intent</span><span class="o">.</span><span class="na">getBundleExtra</span><span class="o">(</span><span class="n">EXTRA_DATA</span><span class="o">);</span>
                    <span class="k">break</span><span class="o">;</span>
                <span class="k">case</span> <span class="nl">HR_FILTER:</span>
                    <span class="n">String</span> <span class="n">hrValue</span> <span class="o">=</span> <span class="n">intent</span><span class="o">.</span><span class="na">getStringExtra</span><span class="o">(</span><span class="n">EXTRA_DATA</span><span class="o">);</span>
                    <span class="k">break</span><span class="o">;</span>
                <span class="k">case</span> <span class="nl">GSR_FILTER:</span>
                    <span class="n">String</span> <span class="n">gsrValue</span> <span class="o">=</span> <span class="n">intent</span><span class="o">.</span><span class="na">getStringExtra</span><span class="o">(</span><span class="n">EXTRA_DATA</span><span class="o">);</span>
                    <span class="k">break</span><span class="o">;</span>
                <span class="k">case</span> <span class="nl">API_RESPONSE:</span>
                    <span class="n">String</span> <span class="n">apiResponse</span> <span class="o">=</span> <span class="n">intent</span><span class="o">.</span><span class="na">getStringExtra</span><span class="o">(</span><span class="n">EXTRA_DATA</span><span class="o">);</span>
                    <span class="k">break</span><span class="o">;</span>
                <span class="k">case</span> <span class="nl">TOAST_MESSAGE:</span>
                    <span class="n">String</span> <span class="n">toastMessage</span> <span class="o">=</span> <span class="n">intent</span><span class="o">.</span><span class="na">getStringExtra</span><span class="o">(</span><span class="n">EXTRA_DATA</span><span class="o">);</span>
                    <span class="k">break</span><span class="o">;</span>
               <span class="k">case</span> <span class="nl">HR_EVENT_FILTER:</span>
                   <span class="n">Break</span><span class="o">;</span>
               <span class="k">case</span> <span class="nl">AROUSAL_FILTER:</span>
                   <span class="k">break</span><span class="o">;</span>
               <span class="k">case</span> <span class="nl">GSR_EVENT_FILTER:</span>
                   <span class="k">break</span><span class="o">;</span>
               <span class="k">case</span> <span class="nl">EMOJI_SENTIMENT_FILTER:</span>
                   <span class="n">Bundle</span> <span class="n">emojiSentimentBundle</span> <span class="o">=</span> <span class="n">intent</span><span class="o">.</span><span class="na">getBundleExtra</span><span class="o">(</span><span class="n">EXTRA_DATA</span><span class="o">);</span>
                   <span class="k">break</span><span class="o">;</span>
               <span class="k">case</span> <span class="nl">TEXT_SENTIMENT_FILTER:</span>
                   <span class="n">Bundle</span> <span class="n">textSentimentBundle</span> <span class="o">=</span> <span class="n">intent</span><span class="o">.</span><span class="na">getBundleExtra</span><span class="o">(</span><span class="n">EXTRA_DATA</span><span class="o">);</span>
                   <span class="k">break</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">};</span>
</code></pre>
<ul>
<li>The <em>BroadcastReceiver</em> must be registered in order to receive <em>Intents</em> from a <em>Service</em>.</li>
<li>The <em>registerReceiver</em> method, takes two arguments: <em>BroadcastReceiver</em> and <em>IntentFilter</em>.</li>
<li>We have included our own method that returns an <em>IntentFilter:</em> <code class="prettyprint">getUpdateIntentFilter()</code> (this method is displayed within Code Snippet 3).</li>
<li>This method should be called immediately on starting the application, therefore, it is placed within the <code class="prettyprint">.onResume()</code> method, as shown in Code Snippet 2.</li>
</ul>

<blockquote>
<p>Code Snippet 5</p>
</blockquote>
<pre class="highlight java tab-java"><code> <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onResume</span><span class="o">()</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">.</span><span class="na">onResume</span><span class="o">();</span>
        <span class="n">registerReceiver</span><span class="o">(</span><span class="n">mMessageReceiver</span><span class="o">,</span> <span class="n">getUpdateIntentFilter</span><span class="o">());</span>
    <span class="o">}</span>
</code></pre>
<blockquote>
<p>Code Snippet 3</p>
</blockquote>
<pre class="highlight java tab-java"><code>  <span class="kd">private</span> <span class="n">IntentFilter</span> <span class="nf">getUpdateIntentFilter</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">IntentFilter</span> <span class="n">filter</span> <span class="o">=</span> <span class="k">new</span> <span class="n">IntentFilter</span><span class="o">();</span>
        <span class="n">filter</span><span class="o">.</span><span class="na">addAction</span><span class="o">(</span><span class="n">HELLO_FILTER</span><span class="o">);</span>
        <span class="n">filter</span><span class="o">.</span><span class="na">addAction</span><span class="o">(</span><span class="n">GPS_FILTER</span><span class="o">);</span>
        <span class="n">filter</span><span class="o">.</span><span class="na">addAction</span><span class="o">(</span><span class="n">ACC_FILTER</span><span class="o">);</span>
        <span class="n">filter</span><span class="o">.</span><span class="na">addAction</span><span class="o">(</span><span class="n">HR_FILTER</span><span class="o">);</span>
        <span class="n">filter</span><span class="o">.</span><span class="na">addAction</span><span class="o">(</span><span class="n">GSR_FILTER</span><span class="o">);</span>
        <span class="n">filter</span><span class="o">.</span><span class="na">addAction</span><span class="o">(</span><span class="n">API_RESPONSE</span><span class="o">);</span>
        <span class="n">filter</span><span class="o">.</span><span class="na">addAction</span><span class="o">(</span><span class="n">TOAST_MESSAGE</span><span class="o">);</span>
        <span class="n">filter</span><span class="o">.</span><span class="na">addAction</span><span class="o">(</span><span class="n">HR_EVENT_FILTER</span><span class="o">);</span>
        <span class="n">filter</span><span class="o">.</span><span class="na">addAction</span><span class="o">(</span><span class="n">AROUSAL_FILTER</span><span class="o">);</span>
        <span class="n">filter</span><span class="o">.</span><span class="na">addAction</span><span class="o">(</span><span class="n">GSR_EVENT_FILTER</span><span class="o">);</span>
        <span class="n">filter</span><span class="o">.</span><span class="na">addAction</span><span class="o">(</span><span class="n">EMOJI_SENTIMENT_FILTER</span><span class="o">);</span>
        <span class="n">filter</span><span class="o">.</span><span class="na">addAction</span><span class="o">(</span><span class="n">TEXT_SENTIMENT_FILTER</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">filter</span><span class="o">;</span>
    <span class="o">}</span>
</code></pre>
<ul>
<li>When the application is destroyed (on application close/force-close), the <em>BroadcastReceiver</em> must be unregistered. This is handled via the <code class="prettyprint">.onDestroy()</code> method.
Code Snippet 4 demonstrates how to achieve this.</li>
</ul>

<blockquote>
<p>Code Snippet 4</p>
</blockquote>
<pre class="highlight java tab-java"><code>    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onDestroy</span><span class="o">()</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">.</span><span class="na">onDestroy</span><span class="o">();</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">mIsBound</span><span class="o">){</span>
            <span class="n">unbindService</span><span class="o">(</span><span class="n">mConnection</span><span class="o">);</span>
            <span class="n">mIsBound</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
            <span class="n">unregisterReceiver</span><span class="o">(</span><span class="n">mMessageReceiver</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
</code></pre>
<h2 id="accelerometer-control">Accelerometer Control</h2>

<h3 id="start-recording">Start Recording</h3>

<h4 id="android">Android</h4>

<p>Use the <code class="prettyprint">sendToService</code> method the the boolean <code class="prettyprint">ACCELERATION_CAPTURE = true</code> with the constant <strong>START_CAPTURE</strong> to the background service.</p>

<h3 id="stop-recording">Stop Recording</h3>

<h4 id="android">Android</h4>

<p>Use the <code class="prettyprint">sendToService</code> method the the boolean <code class="prettyprint">ACCELERATION_CAPTURE = true</code> with the constant <strong>CANCEL_CAPTURE</strong> to the background service.</p>

<h3 id="check-api-sending-status">Check API Sending status</h3>

<h4 id="android">Android</h4>

<ul>
<li>Create a <a href = "#use-a-broadcast-receiver">Broadcast Receiver</a>, setting it up using <strong>API_RESPONSE</strong> intent to handle <strong>SensumAPI</strong> responses.</li>
</ul>

<h3 id="assign-listener">Assign Listener</h3>

<h4 id="android">Android</h4>

<ul>
<li>Create a <a href = "#use-a-broadcast-receiver">Broadcast Receiver</a>, setting it up to handle Accelerometer data using the <strong>ACC_Filter</strong> intent.</li>
</ul>

<h3 id="set-read-frequency">Set Read Frequency</h3>

<h4 id="android">Android</h4>

<ul>
<li>When sending the <strong>START_CAPTURE</strong> message to the service using the <code class="prettyprint">sendToService</code> method, Set the rate of capture using the integer variable DATA_RATE_SEND, while the boolean <strong>ACCELERATION_CAPTURE</strong> is <strong>true</strong>.</li>
</ul>

<h2 id="location-control">Location Control</h2>

<h3 id="start-recording">Start Recording</h3>

<h4 id="android">Android</h4>

<p>Use the <code class="prettyprint">sendToService</code> method the the boolean <code class="prettyprint">GPS_CAPTURE = true</code> with the constant <strong>START_CAPTURE</strong> to the background service.</p>

<h3 id="stop-recording">Stop Recording</h3>

<h4 id="android">Android</h4>

<p>Use the <code class="prettyprint">sendToService</code> method the the boolean <code class="prettyprint">GPS_CAPTURE = true</code> with the constant <strong>CANCEL_CAPTURE</strong> to the background service.</p>

<h3 id="check-api-sending-status">Check API Sending status</h3>

<h4 id="android">Android</h4>

<ul>
<li>Create a <a href = "#use-a-broadcast-receiver">Broadcast Receiver</a>, setting it up using <strong>API_RESPONSE</strong> intent to handle <strong>SensumAPI</strong> responses.</li>
</ul>

<h3 id="assign-listener">Assign Listener</h3>

<h4 id="android">Android</h4>

<ul>
<li>Create a <a href = "#use-a-broadcast-receiver">Broadcast Receiver</a>, setting it up to handle location data using the <strong>GPS_Filter</strong> intent.</li>
</ul>

<h3 id="set-read-frequency">Set Read Frequency</h3>

<h4 id="android">Android</h4>

<ul>
<li>When sending the <strong>START_CAPTURE</strong> message to the service using the <code class="prettyprint">sendToService</code> method, Set the rate of capture using the integer variable DATA_RATE_SAMPLE, while the boolean <strong>GPS_CAPTURE</strong> is <code class="prettyprint">true</code>.</li>
</ul>

<h2 id="tag-control">Tag Control</h2>

<h3 id="start-recording">Start Recording</h3>

<h4 id="android">Android</h4>

<p>Use the <code class="prettyprint">sendToService</code> method the the boolean <code class="prettyprint">INPUT_CAPTURE = true</code> with the constant <strong>START_CAPTURE</strong> to the background service.</p>

<h3 id="stop-recording">Stop Recording</h3>

<h4 id="android">Android</h4>

<p>Use the <code class="prettyprint">sendToService</code> method the the boolean <code class="prettyprint">INPUT_CAPTURE = true</code> with the constant <strong>CANCEL_CAPTURE</strong> to the background service.</p>

<h3 id="check-api-sending-status">Check API Sending status</h3>

<h4 id="android">Android</h4>

<ul>
<li>Create a <a href = "#use-a-broadcast-receiver">Broadcast Receiver</a>, setting it up using <strong>API_RESPONSE</strong> intent to handle <strong>SensumAPI</strong> responses.</li>
</ul>

<h3 id="assign-listener">Assign Listener</h3>

<h4 id="android">Android</h4>

<ul>
<li>Create a <a href = "#use-a-broadcast-receiver">Broadcast Receiver</a>, setting it up to handle text tag data using the <strong>TEXT_SENTIMENT_FILTER</strong> intent.</li>
<li>Create a <a href = "#use-a-broadcast-receiver">Broadcast Receiver</a>, setting it up to handle emoji tag data using the <strong>EMOJI_SENTIMENT_FILTER</strong> intent.</li>
</ul>

<h3 id="create-tag">Create Tag</h3>

<h4 id="android">Android</h4>

<ul>
<li>When sending the <strong>INPUT_SENTIMENT_TEXT</strong> message to the service using the <code class="prettyprint">sendToService</code> method, add the string parameter TEXT_MESSAGE.</li>
</ul>

<h2 id="bluetooth-control">Bluetooth Control</h2>

<h3 id="start-recording">Start Recording</h3>

<h4 id="android">Android</h4>

<p>Use the <code class="prettyprint">sendToService</code> method the the boolean <code class="prettyprint">HR_CAPTURE = true</code> with the constant <strong>START_CAPTURE</strong> to the background service.</p>

<h3 id="stop-recording">Stop Recording</h3>

<h4 id="android">Android</h4>

<p>Use the <code class="prettyprint">sendToService</code> method the the boolean <code class="prettyprint">HR_CAPTURE = true</code> with the constant <strong>CANCEL_CAPTURE</strong> to the background service.</p>

<h3 id="check-api-sending-status">Check API Sending status</h3>

<h4 id="android">Android</h4>

<ul>
<li>Create a <a href = "#use-a-broadcast-receiver">Broadcast Receiver</a>, setting it up using <strong>API_RESPONSE</strong> intent to handle <strong>SensumAPI</strong> responses.</li>
</ul>

<h3 id="assign-listener">Assign Listener</h3>

<h4 id="android">Android</h4>

<ul>
<li>Create a <a href = "#use-a-broadcast-receiver">Broadcast Receiver</a>, setting it up to handle bluetooth data using the <strong>BLE_DEVICE_FILTER</strong>, <strong>BLE_CONNECTION_FILTER</strong>, <strong>BLUETOOTH_DEVICE_FILTER</strong>, <strong>BLUETOOTH_CONNECTION_FILTER</strong> and <strong>DEVICE_DISCONNECTED</strong> intents.</li>
</ul>

<h3 id="scan-for-devices">Scan for Devices</h3>

<h4 id="android">Android</h4>

<ul>
<li>Use the <code class="prettyprint">sendToService</code> method with the constant <strong>BLE_SCAN</strong> or <strong>BLUETOOTH_SCAN</strong>, depending on if the device is compatible with Bluetooth LE or standard, to send the command to the background service.</li>
</ul>

<h3 id="connect-to-device">Connect to Device</h3>

<h4 id="android">Android</h4>

<ul>
<li>Use the <code class="prettyprint">sendToService</code> method with the constant <strong>CONNECT_BLE</strong> or <strong>CONNECT_BLUETOOTH_DEVICE</strong>, depending on if the device is compatible with Bluetooth LE or standard, as well a bundle containg the string variables <strong>DEVICE_NAME</strong> and <strong>DEVICE_ADDRESS</strong> to send the command to the background service.</li>
</ul>

<h3 id="disconnect-from-device">Disconnect From Device</h3>

<h4 id="android">Android</h4>

<ul>
<li>Use the <code class="prettyprint">sendToService</code> method with the constant <strong>DISCONNECT_BLE</strong> or <strong>DISCONNECT_BLUETOOTH</strong>, depending on if the device is compatible with Bluetooth LE or standard, as a bundle to the background service.</li>
</ul>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="javascript">JavaScript</a>
                <a href="#" data-language-name="javascript--nodejs">Node.JS</a>
                <a href="#" data-language-name="python">Python</a>
                <a href="#" data-language-name="java">Java (Android)</a>
          </div>
      </div>
    </div>
  </body>
</html>
